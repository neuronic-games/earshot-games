<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  
  <meta http-equiv='cache-control' content='no-cache'>
  <meta http-equiv='expires' content='0'>
  <meta http-equiv='pragma' content='no-cache'>

  <!-- <meta http-equiv="EXPIRES" content="Mon, 24 April 2023 11:00:00 GMT" /> -->

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="apple-mobile-web-app-capable" content="yes" />

  <!--title>ZapSheet - Game Library</title-->
  <title>Game</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
  <link rel="stylesheet" href="slick/slick.css" />
  <link rel="stylesheet" href="slick/slick-theme.css" />
  <link rel="stylesheet" href="css/style.css?version=1.1.4" />
  <link rel="icon" type="image/x-icon" href="zap_icons_game.png?version=1.1.3" />
  <link rel="apple-touch-icon" href="zap_icons_game.png?version=1.1.3" />


  <link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400&display=swap" rel="stylesheet" />


</head>

<body class="page_greek d-flex flex-column min-vh-100">
  
  <header id="page-header" class="game_header pt-4">
		<div class="container">
			<div class="game_logo" onclick="">
				<img src="images/icon_game.png" alt="" class="img-fluid mr-3" width="60"/>
				<img src="images/logo_icon.png" alt="" class="img-fluid" width="200"/>
			</div>
			<h1 class="h2 header_title mt-md-5 mt-4 font-poppins">Manage Your Game Library</h1>
		</div>
	</header>

  <!--- Modal View Start-->
  <div class="modal fade" id="myModal2" role="dialog">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content" id="goModal2">
        
        <div style="position: absolute;">
          <p style="position: relative;
          top: -8.2em;
          font-size: 1.3em; font-family: eurostile; color: #8B5E3B; letter-spacing: 2px;">VIEW GAMES BY</p>
        </div>

        <div class="playerContainer">
          
          <div id="btnMinusPlayer" class="card-header ak_card_minus" style="z-index: 999999;">
            <img src="images/ear_icon_minus.png" width="25px" height="auto" alt="" onclick="onDecreasePlayers()" />
          </div>
          <label id="playerTotal" class="playerFilter">1</label>
          <div id="btnPlusPlayer" class="card-header ak_card_plus" style="z-index: 999998;">
            <img src="images/ear_icon_plus.png" width="25px" height="auto"  alt="" onclick="onIncreasePlayers()" />
          </div>
          <label class="cBoxContainer">
            <input id="cBoxPlayer" type="checkbox" onclick="onPlayerCheckClick()">
            <span class="cBoxCheckmark">
              <img id="playerIcon" src="images/earshot-games_icon_count.png" style="position: relative;
              width: 100%;
              height: 100%;
              top: 0.2em;" alt=""/>
            </span>
          </label>
          <label class="playerLabel">Player Count</label>
        </div>

        
        <div class="timeContainer">
          
          <div id="btnMinusTime" class="card-header ak_card_minus" style="z-index: 999999;">
            <img src="images/ear_icon_minus.png" width="25px" height="auto" alt="" onclick="onDecreaseTime()" />
          </div>
          <label id="timeTotal" class="timeFilter">15</label>
          <label id="minTxt" style="font-size: 0.6em;
          position: absolute;
          top: 7.8em;
          z-index: 9;
          left: 0em; display: none; color: #845F41;">MINS</label>
          <div id="btnPlusTime" class="card-header ak_card_plus" style="z-index: 999998;">
            <img src="images/ear_icon_plus.png" width="25px" height="auto"  alt="" onclick="onIncreaseTime()" />
          </div>
          <label class="cBoxContainer">
            <input id="cBoxTime" type="checkbox" onclick="onTimeCheckClick()">
            <span class="cBoxCheckmark">
              <img id="timerIcon" src="images/earshot-games_icon_duration.png" style="position: relative;
              width: 100%;
              height: 100%;
              top: 0.2em;" alt=""/>
            </span>
          </label>

          <label class="timeLabel">Duration</label>
        </div>

        <div style="position: absolute;">
          <p style="position: relative;
          top: -3.9em;
          font-size: 0.8em; font-family: eurostile; color: #F6D8A0; letter-spacing: 2px;">GAME TYPE</p>
        </div>

       <!--  <div class="timeContainer"> -->
          <div class="mechanics">
              <div style="position:relative; top: -2.5em; left: -2.1em;">
                
                <label class="cBoxContainer">
                  <input id="cBoxStrategy" type="checkbox" onclick="onStrategyCheckClick()">
                  <span class="cBoxCheckmark">
                    <img src="images/earshot-games_icon_strategy.png" style="position: relative;
              width: 100%;
              height: 100%;
              top: 0.2em;" alt=""/>
                  </span>
                </label>
                <label class="mechanicLabel">STRATEGIC</label>
              </div>

            <div style="position:relative; top: -2.5em; left:3.4em">
              
              <label class="cBoxContainer">
                <input id="cBoxStory" type="checkbox" onclick="onStoryCheckClick()">
                <span class="cBoxCheckmark">
                  <img src="images/earshot-games_icon_story.png" style="position: relative;
              width: 100%;
              height: 100%;
              top: 0.2em;" alt=""/>
                </span>
              </label>
              <label class="mechanicLabel">STORYTELLING</label>
            </div>

            <div style="position:relative; top: 3em; left: -2.1em;">
              
              <label class="cBoxContainer">
                <input id="cBoxParty" type="checkbox" onclick="onPartyCheckClick()">
                <span class="cBoxCheckmark">
                  <img src="images/earshot-games_icon_party.png" style="position: relative;
              width: 100%;
              height: 100%;
              top: 0.2em;" alt=""/>
                </span>
              </label>
              <label class="mechanicLabel">PARTY</label>
            </div>
            <div style="position:relative; top: 3em; left: 3.4em;">
             
              <label class="cBoxContainer">
                <input id="cBoxCo" type="checkbox" onclick="onCoCheckClick()">
                <span class="cBoxCheckmark">
                  <img src="images/earshot-games_icon_coop.png" style="position: relative;
              width: 100%;
              height: 100%;
              top: 0.2em;" alt=""/>
                </span>
              </label>
              <label class="mechanicLabel">CO-OP</label>
            </div>


            <!-- <div style="position:relative; top: 7.2em;">
              <label class="mechanicLabel">DECK BUILDING</label>
              <label class="cBoxContainer">
                <input id="cBoxDb" type="checkbox" onclick="onDbCheckClick()">
                <span class="cBoxCheckmark"></span>
              </label>
            </div>
            <div style="position:relative; top: 9em;">
              <label class="mechanicLabel">STORYTELLING</label>
              <label class="cBoxContainer">
                <input id="cBoxSt" type="checkbox" onclick="onStCheckClick()">
                <span class="cBoxCheckmark"></span>
              </label>
            </div>
            <div style="position:relative; top: 10.8em;">
              <label class="mechanicLabel">DEDUCTION</label>
              <label class="cBoxContainer">
                <input id="cBoxDed" type="checkbox" onclick="onDedCheckClick()">
                <span class="cBoxCheckmark"></span>
              </label>
            </div> -->
            <div id="searchFilter" style="position: absolute;
            left: 3.5em;
            top: -2.3em;
            display: block; display: none;">
              <img src="./css/Reload-1s-200px.gif" width="40" height="40" class="image_id text-center" alt="" />
            </div>
          </div>
        
        <!-- </div> -->

        <div style="position:relative; top: 11.3em; left: -4.2em;" onclick="ResetFilterItems();">
          <img src="images/earshot-games_btn_reset.png" width = "62px" alt="" />
        </div>

        <div style="position:relative; top: 8.7em; left: 1.3em;" onclick="hideFilterBox();">
          <img src="images/earshot-games_btn_go.png" width = "220px" alt="" />
        </div>

      </div>
    </div>
  </div>
  <!-- Modal View End -->
  <!-- List / Slideshow View Start -->
  <div class="container mt-2 mb-5">
    <div class="row">
      <div class="col-md-12 list-view-section">
        <div class="row bg-alto header-row-section mx-0 d-none align-items-center position-sticky sticky-top" style="display: flex;">
            <div class="col p-0">
              <div class="bg-alto py-1 my-0 px-2 preview_title pointer-cursor text-left">
                <button class="btn btn-outline-primary" onClick="viewSlideShowHTML();">SLIDESHOW</button>
                <button id="btnFindList" class="btn btn-outline-primary" onClick="viewSearchPanel();">FIND</button>
              </div>
            </div>
            <div class="col-auto-grid">
                <div class="pagination-bar d-flex justify-content-end">
                  <a id="prevLink" href="javascript:;" class="page-pre text-right text-uppercase">Prev</a>
                  <div class="pagination-pages"></div>
                  <a id="nextLink" href="javascript:;" class="page-next text-right text-uppercase">Next</a>
                </div>
            </div>
          
        </div>
        <div style="position: fixed;
        width: 100%;
        left: 0px;
        background-color: white;
        height: 113px;
        z-index: 99;
        top: -52px;"></div>

        <!--<div class="image_slider"> </div>-->
        <div class="cardList"></div>
      </div>
      <div class="col-md-12 list-slideshow-section d-none">
        <!-- <div class="bg-alto py-1 px-2 preview_title pointer-cursor text-right"><button class="btn btn-outline-primary" onClick="toggleSlideShowView();">View All</button></div> -->
        <div class="bg-alto py-1 px-2 preview_title pointer-cursor">
          <button id="btnViewAll" class="btn btn-outline-primary" onClick="toggleSlideShowView();">VIEW ALL</button>
          <button id="btnFindSlide" class="btn btn-outline-primary" onClick="viewSearchPanel();">FIND</button>
          <p id="sliderDate" class="text-right slideshowTime"></p>
        </div>
        <div class="slideshow-slider"></div>
      </div>
      <div class="col-md-12 detail-view-section d-none">
        <div class="back-btn pointer-cursor px-4 rounded-0 py-2 mb-3 btn bg-alto text-uppercase text-primary font-DINCondensed position-sticky sticky-top">Go Back</div>
        <div style="position: fixed;
        width: 100%;
        left: 0px;
        background-color: white;
        height: 101px;
        z-index: 99;
        top: -50px;"></div>
        <div class="game-details"></div>
      </div>
      <!-- <div class="text-center loader-spinner" style="margin: auto;">
        <img src="./css/Reload-1s-200px.gif" width="50" height="50" class="image_id text-center" alt="" />
      </div> -->
      <div class="text-center loader-spinner-text" style="margin: auto; position: relative; margin-top:4.5em;">
        <img src="zap_icons_game.png" width="70" height="70" class="image_id text-center" alt="" />
        <!-- <img src="./css/Reload-1s-200px.gif" width="40" height="40" class="image_id text-center" alt="" /> -->
        <p id="loadingTxt">Loading...<br> Game Data</p>
      </div>
    </div>
  </div>

  <footer id="page-footer" class="game_footer mt-auto pb-4">
		<div class="container">
			<div class="copyright text-center text-light" style="position: relative; height: 1em;"><!-- © 2023 zsheets 2023 All Right Reserved --></div>
		</div>
	</footer>


  <!-- List / Slideshow View End -->
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
    crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="slick/slick.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"
    integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ=="
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>


    <script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>

  <!-- <script src="js-package/store.legacy.min.js"></script> -->
  <script>


    /////////////////////////////////////////////////////////////////////////////////////////////////
    // Hider loader
    //hideloader()
    /////////////////////////////////////////////////////////////////////////////////////////////////
    // checking Listener
    //addEventListener("resize", (event) => {renderPaginationHTML()});

    //////////////////////////////////////////////////////////////////////////////////////////////////
    /* function closeIt(event)
    {
      //localStorage.setItem("refreshStatus", "true")
      return "Any string value here forces a dialog box to \n" + 
            "appear before closing the window.";
      
    }
    window.onbeforeunload = closeIt; */
    //////////////////////////////////////////////////////////////////////////////////////////////////
    // Checking whether the page is loaded or reloaded/refresh
    /* if (window.performance) {
      if (performance.navigation.type == 1) {
        alert( "This page is reloaded" );
      } else {
        alert( "This page is not reloaded");
      }
    } */
    //////////////////////////////////////////////////////////////////////////////////////////////////

    // Reset Filter Item
    function ResetFilterItems() {
      // Player
      playerCount = 1
      document.getElementById("cBoxPlayer").checked = false
      document.getElementById("btnMinusPlayer").style.display = "none"
      document.getElementById("btnPlusPlayer").style.display = "none"
      document.getElementById('playerTotal').innerHTML = ""
      document.getElementById('playerTotal').style.color = "red"
      document.getElementById('playerTotal').style.zIndex = -9
      document.getElementById("playerIcon").style.display = "block"

      // Duration
      timeCount = 15
      document.getElementById("cBoxTime").checked = false
      document.getElementById("btnMinusTime").style.display = "none"
      document.getElementById("btnPlusTime").style.display = "none"
      document.getElementById('timeTotal').innerHTML = ""
      document.getElementById('timeTotal').style.color = "red"
      document.getElementById('timeTotal').style.zIndex = -9
      document.getElementById('timerIcon').style.display = "block"
      document.getElementById("minTxt").style.display = "none"

      // disable all items
      document.getElementById("cBoxCo").checked = false
      document.getElementById("cBoxStrategy").checked = false
      document.getElementById("cBoxStory").checked = false
      document.getElementById("cBoxParty").checked = false


      filterGamesOnPlayerTime()
      }
     
    // Hide filter box
    function hideFilterBox() {
      $('#myModal2').modal('hide');
      // Make the button active
      if(MODE_TYPE == "list") {
        document.getElementById("btnFindList").classList.remove("btn-outline-primary-active");
        document.getElementById("btnFindList").classList.add("btn-outline-primary");
      } else {
        document.getElementById("btnFindSlide").classList.remove("btn-outline-primary-active");
        document.getElementById("btnFindSlide").classList.add("btn-outline-primary");
      }
    }

    //////////////////////////////////////////////////////////////////////////////////////////////////
    // Checkbox
    var inputs = document.getElementsByTagName('input');
    for (var i=0; i<inputs.length; i++)  {
      if (inputs[i].type == 'checkbox')   {
        inputs[i].checked = false;

        // For Player
        document.getElementById("btnMinusPlayer").style.display = "none"
        document.getElementById("btnPlusPlayer").style.display = "none"
        document.getElementById('playerTotal').innerHTML = ""
        document.getElementById('playerTotal').style.zIndex = -9
        document.getElementById('playerTotal').style.color = "red"

        // For Time
        document.getElementById("btnMinusTime").style.display = "none"
        document.getElementById("btnPlusTime").style.display = "none"
        document.getElementById('timeTotal').innerHTML = ""
        document.getElementById('timeTotal').style.color = "red"
        document.getElementById('timeTotal').style.zIndex = -9
        document.getElementById('timerIcon').style.display = "block"
        document.getElementById("minTxt").style.display = "none"

      }
    }
    function onPlayerCheckClick(event) {
      //console.log("PlayeCheckBoxClick - ", document.getElementById("cBoxPlayer").checked)
      var cBoxPlayerStat = document.getElementById("cBoxPlayer").checked
      if(cBoxPlayerStat == true) {

        document.getElementById("btnMinusPlayer").style.display = "block"
        document.getElementById("btnPlusPlayer").style.display = "block"
        document.getElementById('playerTotal').innerHTML = playerCount
        document.getElementById('playerTotal').style.color = "#845F41"
        document.getElementById('playerTotal').style.zIndex = 9
        
        document.getElementById("playerIcon").style.display = "none"
      } else {
        document.getElementById("btnMinusPlayer").style.display = "none"
        document.getElementById("btnPlusPlayer").style.display = "none"
        document.getElementById('playerTotal').innerHTML = ""
        document.getElementById('playerTotal').style.color = "red"
        document.getElementById('playerTotal').style.zIndex = -9


        document.getElementById("playerIcon").style.display = "block"
      }
      filterGamesOnPlayerTime()
    }
    function onTimeCheckClick(event) {
      //console.log("PlayeCheckBoxClick - ", document.getElementById("cBoxPlayer").checked)
      var cBoxTimeStat = document.getElementById("cBoxTime").checked
      if(cBoxTimeStat == true) {
        document.getElementById("btnMinusTime").style.display = "block"
        document.getElementById("btnPlusTime").style.display = "block"
        document.getElementById('timeTotal').innerHTML = timeCount
        document.getElementById('timeTotal').style.color = "#845F41"
        document.getElementById('timeTotal').style.zIndex = 9

        document.getElementById('timerIcon').style.display = "none"
        document.getElementById("minTxt").style.display = "block"
      } else {
        document.getElementById("btnMinusTime").style.display = "none"
        document.getElementById("btnPlusTime").style.display = "none"
        document.getElementById('timeTotal').innerHTML = ""
        document.getElementById('timeTotal').style.color = "red"
        document.getElementById('timeTotal').style.zIndex = -9
        document.getElementById('timerIcon').style.display = "block"
        document.getElementById("minTxt").style.display = "none"
      }
      filterGamesOnPlayerTime()
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    // Mechanics Filter functions
    function onCoCheckClick(event) {
      filterGamesOnPlayerTime()
    }
    function onStrategyCheckClick(event) {
      filterGamesOnPlayerTime()
    }
    function onStoryCheckClick(event) {
      filterGamesOnPlayerTime()
    }
    function onPartyCheckClick(event) {
      filterGamesOnPlayerTime()
    }
    /* function onAcCheckClick() {
      filterGamesOnPlayerTime()
    }
    function onWpCheckClick(event) {
      filterGamesOnPlayerTime()
    }
    function onRbCheckClick(event) {
      filterGamesOnPlayerTime()
    }
    function onDbCheckClick(event) {
      filterGamesOnPlayerTime()
    }
    function onStCheckClick(event) {
      filterGamesOnPlayerTime()
    }
    function onDedCheckClick(event) {
      filterGamesOnPlayerTime()
    } */
    //////////////////////////////////////////////////////////////////////////////////////////////////
    //localStorage.setItem("refreshStatus", "null")
    // Global Variables
    var allBoardGames = [];
    var boardgames;
    var boardgameBasicData;
    var paged = 0;
    var sourceType = '';
    var MODE_TYPE = 'list';
    var RATING_MODE = "star"
    var loadType = ""

    var settingLoaded = false
    var privateLoaded = false
    var gameLoaded = false

    var deviceType = ""

    var clickedSlideID = -1

    /* var toggleRatingClick = false */

    //var filterBoardGames = []

    //////////////////////////////////////////////////////////////////////////////////////////////////
    // Checking whether the page is loaded or reloaded/refresh
    if (window.performance) {
      if (performance.navigation.type == 1) {
        //alert( "This page is reloaded" );
        loadType = "refresh"
      } else {
        //alert( "This page is not reloaded");
        loadType = "normal"
      }
    }
    
    //console.log(loadType, " LoadType")
    //////////////////////////////////////////////////////////////////////////////////////////////////
    // Slick Slide
    var $slider = $('.slideshow-slider');
    var currentSlide = 0
    var previousSlide = 0
    var slideStatus = "stop"
    var timerCount = 0
    function checkSlickStatus() {
      const slickStatusTimer = setTimeout(function() {
        clearTimeout(slickStatusTimer)
        //slideStatus = "stop"
        
        if(timerCount == 2) {
            slideStatus = "active"
            timerCount = 0
        }
        //console.log(slideStatus, " Status ", timerCount, " search - ", $("#myModal2").is(":visible"))
        /* if($("#myModal2").is(":visible")) {
          $('.slideshow-slider').slick('slickPause');
        } else {
          $('.slideshow-slider').slick('slickPlay');
        }

        if(slideStatus == "cycling") {
          hideMenuButtons()
        } else {
          showMenuButtons()
        } */
        
        timerCount++
        checkSlickStatus()
      }, 7000)
    }
    ////////////////////////////////////////////////////////////////////////////////
    function showMenuButtons() {
      document.getElementById("btnFindSlide").style.opacity = 1;
      document.getElementById("btnViewAll").style.opacity = 1;
      document.getElementById("btnFindSlide").style.transition = "all 0.5s";
      document.getElementById("btnViewAll").style.transition = "all 0.5s";

      document.getElementById("btnFindSlide").disabled = false;
      document.getElementById("btnViewAll").disabled = false;

      // Pause the slideshow
      if($('.slideshow-slider') != undefined) {
        $('.slideshow-slider').slick('slickPause');
      
      $('.slick-next').show();
      $('.slick-prev').show();
    }

      viewSearchPanel()
      

    }

    function hideMenuButtons() {
      document.getElementById("btnFindSlide").style.opacity = 0;
      document.getElementById("btnViewAll").style.opacity = 0;
      document.getElementById("btnFindSlide").style.transition = "all 0.5s";
      document.getElementById("btnViewAll").style.transition = "all 0.5s";

      document.getElementById("btnFindSlide").disabled = true;
      document.getElementById("btnViewAll").disabled = true;

      // Pause the slideshow
      if($('.slideshow-slider') != undefined) {
        $('.slideshow-slider').slick('slickPlay');
    

        $('.slick-next').hide();
        $('.slick-prev').hide();
      }
      
    }
    ////////////////////////////////////////////////////////////////////////////////

    
    function updateSliderCounter(slick) {
      currentSlide = slick.slickCurrentSlide() + 1
      if(previousSlide != currentSlide) {
        previousSlide = currentSlide
      }
      timerCount = 0
      slideStatus = "cycling"
      //console.log(currentSlide, " >>> currentSlide ", slick.autoplay)

      // Hide menu buttons
      hideMenuButtons()
    }
    
    $slider.on('afterChange', function(event, slick, currentSlide) {
      //updateSliderCounter(slick);
    });
    
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function updateSlideshowTimer() {
      const sliderTimerEvent = setTimeout(function() {
        clearTimeout(sliderTimerEvent)
        var nDate = moment(new Date()).format("hh:mm A")
        document.getElementById('sliderDate').innerHTML = nDate;
      }, 1000)
      updateSlideshowTimer()
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    // IDLE TIMEOUT
    //let idleTimeOut = 6 // Idle threshold 1 MINS
    //var idleState = false;
	  //var idleTimer = null;

    // For Filter variables
    var playerCount = 1
    var timeCount = 15
    //$('*').bind('mousemove click mouseup mousedown keydown keypress keyup submit change mouseenter scroll resize dblclick', function () {
        //clearTimeout(idleTimer);
        ////////////////////////////////////////////////////////////////////
        //if (idleState == true) { 
          // console.log("Active");
          // toggleSlideShowView();
       // }
        ////////////////////////////////////////////////////////////////////
        //idleState = false;
        //idleTimer = setTimeout(function () { 
          // console.log("In-Active");
          /* if(typeof boardgames == 'undefined' || boardgames == ''){
            return false;
          } */
          ////////////////////////////////////////////////////////////////////
          //if(MODE_TYPE == 'list') {
        //    //viewSlideShowHTML();
         // } else {
         //   console.log(idleState, " ---- ")
         // }
          //console.log(idleState, " ---- ")
          ////////////////////////////////////////////////////////////////////
        // idleState = true; 
        //}, idleTimeOut * 1000);
    //});

    // IDLE TIMEOUT
    let idleTime;
    let idleTimeOut = 60 // Idle threshold 3 MINS
    let idleStatus = false
    window.addEventListener('load', resetIdleTimer, true);
    // Event to check for
    let events = ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'];
    events.forEach(function (name) {
      document.addEventListener(name, resetIdleTimer, true);
    });

    function idleOut() {
      idleStatus = true
      //console.log("in idle 1 - ", idleStatus)
      clearTimeout(idleTime);
      ////////////////////////////////////////////
      if(MODE_TYPE == "slideshow") {
        $('.slideshow-slider').slick('slickPlay')
        slideStatus = "cycling"
        hideMenuButtons()
        clickedSlideID = -1
        /////////////////////////////////////////////
        // Hide Filter Box
        hideFilterBox();
        ////////////////////////////////////////////
      }
      idleTime = setTimeout(idleOut, (idleTimeOut * 1000))
    }

    function resetIdleTimer() {
      if(idleStatus == true || idleStatus == undefined) {
        idleStatus = false
        //console.log("in idle 2 - ", idleStatus)
        ////////////////////////////////////////////////
        if(MODE_TYPE == "slideshow") {
          $('.slideshow-slider').slick('slickPause')
          slideStatus = "active"
          showMenuButtons()
        }
        ////////////////////////////////////////////////
      }
      clearTimeout(idleTime);
      idleTime = setTimeout(idleOut, (idleTimeOut * 1000))
    }


    //////////////////////////////////////////////////////////////////////////////////////////////////
    function getUrlVars() {
      var vars = [], hash;
      var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
      for (var i = 0; i < hashes.length; i++) {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
      }
      return vars;
    }  
    //////////////////////////////////////////////////////////////////////////////////////////////////
    // TO LOAD PRIVATE DATA IN THE BEGINNING
    let privateDataList = []
    let sheet_Name = ''
    let user_name = ''

    //console.log(store.get('earshot_bgg_game'), " boardgame data")

    function getGamesPrivateData() {

      // showing message
      document.getElementById("loadingTxt").innerHTML = "Loading... <br> Games private data"

      if(loadType == "normal" && localStorage.getItem("earshot_privateData") != null) {
      /* if(loadType == "normal" && store.get('earshot_privateData') != "undefined") { */
      /* if(loadType == "normal" && store.get('earshot_bggData') != "undefined") { */

        //console.log("Loading from localstorage - privateDataList")
        // Reassign the stored value
       
         privateDataList = JSON.parse(localStorage.getItem("earshot_privateData"))
       /* privateDataList = JSON.parse(store.get('earshot_privateData').data) */
      /*  privateDataList = JSON.parse(store.get('earshot_bggData').bgg_privateData) */
       
       // Check for username passed from querystring else set the username from sheet data
       privateLoaded = true
      checkUserQueryString()

      } else /* if(loadType == "refresh")  */{
        //console.log("Loading from server - privateDataList")
        $.ajax({ 
          //url: apiurl, 
          url: 'private_data.php', 
          type:'POST', 
          data:{'sheetId' : sheet_Id, 'sheet' : sheet_Name}, 
          cache: false, 
          success: function (response) {
            //console.log(response)
            var mResponseSC = response.replace(/�/g, "") 
            var mResponseDQ = mResponseSC.replace(/"/g, "dqo") 
            var mResponseDDQ = mResponseDQ.replace(/: dqo/g, ": 'dqo") 
            var mResponseDDQE = mResponseDDQ.replace(/dqo,/g, "dqo',") 
            const regex = /('(?=(,\s*')))|('(?=:))|((?=([:,]\s*))')|((?={)')|('(?=}))/g; 
            let replaceResponseRegX = mResponseDDQE.replace(regex, '"').replace(/{'/g, '{"').replace(/: '/g, ': "').replace(/, '/g, ', "'); 
            let replaceResponse = replaceResponseRegX.replace(/\\'/g, "'"); 
            privateDataList = JSON.parse(replaceResponse)

            // Storing to local storage
            localStorage.setItem("earshot_privateData", JSON.stringify(privateDataList)) 
            /* store.set("earshot_privateData", { data:JSON.stringify(privateDataList)}) */
            /* store.set("earshot_bggData", { bgg_privateData:JSON.stringify(privateDataList)}) */
            
            //console.log(privateDataList, " DATA")
            // Check for username passed from querystring else set the username from sheet data
            privateLoaded = true
            checkUserQueryString()
          }
        })
      }
      
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    // Load Setting
    let settingDataList = []
    function getGamesSettingData() {

      // showing message
      document.getElementById("loadingTxt").innerHTML = "Loading... <br> Games setting data"

      if(loadType == "normal" && localStorage.getItem("earshot_settingData") != null) {
      /* if(loadType == "normal" && store.get('earshot_settingData') != "undefined") { */
        
      /* if(loadType == "normal" && store.get('earshot_bggData').bgg_settingData != "undefined") { */

        //console.log("Loading from localstorage - settingDataList")
        
        // Reassign the stored value
        settingDataList = JSON.parse(localStorage.getItem("earshot_settingData"))
        /* settingDataList = JSON.parse(store.get('earshot_settingData').data) */
        /* settingDataList = JSON.parse(store.get('earshot_bggData').bgg_settingData) */

        settingLoaded = true

        // Getting game private data based on the filter
        $.each(settingDataList, function (index, row) {
          if(row["Profile"] == "BGG") {
            sheet_Name = row["Sheet"]
            user_name = row["User"]
            // Load list at start
            getGamesPrivateData()
          }
        })

      } else /* if(loadType == "refresh") */ {
        //console.log("Loading from server - settingDataList")
        $.ajax({ 
          //url: apiurl, 
          url: 'private_data.php', 
          type:'POST', 
          data:{'sheetId' : sheet_Id, 'sheet' : 'Settings'}, 
          cache: false, 
          success: function (response) {
            //console.log(response, " --- " )
            if(response == "") {
              checkUserQueryString()
              return
            }
            var mResponseSC = response.replace(/�/g, "") 
            var mResponseDQ = mResponseSC.replace(/"/g, "dqo") 
            var mResponseDDQ = mResponseDQ.replace(/: dqo/g, ": 'dqo") 
            var mResponseDDQE = mResponseDDQ.replace(/dqo,/g, "dqo',") 
            const regex = /('(?=(,\s*')))|('(?=:))|((?=([:,]\s*))')|((?={)')|('(?=}))/g; 
            let replaceResponseRegX = mResponseDDQE.replace(regex, '"').replace(/{'/g, '{"').replace(/: '/g, ': "').replace(/, '/g, ', "'); 
            let replaceResponse = replaceResponseRegX.replace(/\\'/g, "'"); 
            settingDataList = JSON.parse(replaceResponse)  
            //console.log(settingDataList, " Setting DATA")

            // Storing to local storage
            localStorage.setItem("earshot_settingData", JSON.stringify(settingDataList)) 
            /* store.set("earshot_settingData", { data:JSON.stringify(settingDataList)}) */
           /*  store.set("earshot_bggData", { bgg_settingData:JSON.stringify(settingDataList)}) */

           settingLoaded = true

            $.each(settingDataList, function (index, row) {
              if(row["Profile"] == "BGG") {
                sheet_Name = row["Sheet"]
                user_name = row["User"]
                // Load list at start
                getGamesPrivateData()
              }
            })
            
          }
        })
      }

    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    var sheet_Id = (getUrlVars()["id"]) ? getUrlVars()["id"] : '';
    if(sheet_Id == '') {
      //$(".cardList").html('<div class="text-center mt-5 pt-5"><h3>Sheet ID MISSING</h3><p>Use correct setting seet Id.</p></div>');
      //hideloader();
      checkUserQueryString()
    } else {
      // Load setting data at start
      // Shiowing Loading modal
      getGamesSettingData()
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function checkUserFillData() {
      //console.log("Click")

      // Change user activity type
      loadType = "refresh"

      // Store the actual link of the app
      let winLoc = window.location.href.split("?")[0]
      // get the values from the search form
      let uSheetId = document.getElementById("usheetId").value
      //console.log(uSheetId.length, " len")
      if(uSheetId != "") {
        $(".cardList").html("");
        let splitParam = "https://docs.google.com/spreadsheets/d/"
        if(uSheetId.length > 30) {
          let correctURL = uSheetId.includes(splitParam)
          if(correctURL) {
            // Get Google Sheet url
            sheet_Id = uSheetId.split(splitParam)[1].split("/")[0]
          } else {
            sheet_Id = uSheetId
          }
          window.history.replaceState({}, "null", (winLoc + "?id=" + sheet_Id))
          getGamesSettingData()
          showloader()
        } else {
          // For user name
          user_name = uSheetId
          window.history.replaceState({}, "null", (winLoc + "?username=" + user_name))
          checkUserQueryString()
          showloader()
        }
      }

      /* let uName = document.getElementById("uname").value
      let uSheetURL = document.getElementById("usheeturl").value

      // Fetch the data based on the filled search form
      if(uSheetId != "") {
        $(".cardList").html("");
        sheet_Id = uSheetId
        window.history.replaceState({}, "null", (winLoc + "?id=" + sheet_Id))
        getGamesSettingData()
        showloader()
      } else if(uName != "") {
        $(".cardList").html("");
        user_name = uName
        window.history.replaceState({}, "null", (winLoc + "?username=" + user_name))
        checkUserQueryString()
        showloader()
      } else if(uSheetURL != "") {
        $(".cardList").html("");
        let splitParam = "https://docs.google.com/spreadsheets/d/"
       let correctURL = uSheetURL.includes(splitParam)
       if(correctURL) {
        sheet_Id = uSheetURL.split(splitParam)[1].split("/")[0]
       } else {
        sheet_Id = ""
       }
        window.history.replaceState({}, "null", (winLoc + "?id=" + sheet_Id))
        getGamesSettingData()
        showloader()
      } */
      //console.log(uSheetId, " --- ", uName, " --- ", uSheetURL)
    }

    /////////////////////////////////////////////////////////////////////////////////////////////////
    /* function shuffleGameBasedonOwn(data, basicData) {
      let ownGames = []
      for (var i=0; i < data.length; i++) {
        var objectid = data[i]['@attributes']['objectid'];
        var isOwn = boardgameBasicData[objectid].status['@attributes']['own']
        if(isOwn != 0) {
          ownGames.push(data)
        }
      }
      return ownGames
    } */
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function checkUserQueryString() {
      // showing message
      //console.log("showing data - ", document.getElementById("loadingTxt") , " >>>")
      document.getElementById("loadingTxt").innerHTML = "Loading... <br> Games data"

      //#F0B258
      let messageBody = ""
      if(sheet_Id == "" && user_name == "") {
        messageBody = "*SHEET ID, SHEET URL OR USERNAME IS MISSING"
      } else if(sheet_Id != "" && user_name == "") {
        messageBody = "*SHEET ID IS INCORRECT"
      }
      //console.log(sheet_Id, " --- ", user_name)

      var username = (getUrlVars()["username"]) ? getUrlVars()["username"] : user_name;
      if(username == ''){
        $(".cardList").html(`<!--div class="bg-alto header-row-section p-3 position-sticky sticky-top" style="position: relative; z-index:99999 !important; height: 2.5em !important; border-left: 15px solid #ff0000;"></div-->
        <div class="position-sticky sticky-top" style="position: relative; z-index:99999 !important; height: 1em !important"></div>
        <div class="text-center mt-4 pt-4" style="position: relative; top: 0em;">
          <h5 class="text-center" style="color:red; display:${(sheet_Id == "" && user_name == "") ? 'none' : 'block'}">${messageBody}</h5>
          <h4 class="text-center h3 mb-3" style="position:relative;top: 1em; z-index:9; font-family: 'DINRegular'; letter-spacing: -1px; font-weight: 700;">ENTER YOUR BGG USER NAME, GOOGLE SHEET ID, OR GOOGLE SHEET URL</h4>
          <div id="settingBox" class="text-center mt-4 pt-4" style="width: 60%; position:relative; height: auto; left: 20%;background-color: #FFFFFF; box-shadow: 0 0 0 3px #FFFFFF, 0 0 0 3px #FFFFFF; margin-top: 0em !important; border-radius: 2px;">
            <div style="border: 2px solid #FFFFFF; padding: 5px; border-radius: 5px; position: relative; width: 96%; left: 2%; top: -10px;">
              <!--h5 class="text-left" style="position:relative; margin-top:0px !important; margin-left:0em; width:100%">GOOGLE SPREADSHEET ID</h5-->
              <input class="form-control" type="text" id="usheetId" name="usheetId" style="position: relative; margin-top: 0px; width: 100%;margin-left: 0em; height: 2.5em; font-family: DINRegular;" pattern="[A-Za-z0-9]+" onkeydown="if(['Space'].includes(arguments[0].code)){return false;}"/>
            </div>
            <!--h5 style="width: 97%; position: relative; left: 1.7% !important; background-color: #F0B258; margin-top: 0em">OR</h5>
            <div style="border: 2px solid #FFFFFF; padding: 5px; border-radius: 5px; position: relative; width: 96%; left: 2%; top: 3px;">
              <h5 class="text-left" style="position:relative; margin-top:0px !important; margin-left:0em; width:100%">GOOGLE SPREADSHEET URL</h5>
              <input type="text" id="usheeturl" name="usheeturl" style="position: relative; margin-top: -5px; width: 100%; margin-left: 0em; height: 2em; font-family: DINRegular;" pattern="[A-Za-z0-9]+" onkeydown="if(['Space'].includes(arguments[0].code)){return false;}"/>
            </div>
            <h5 style="width: 97%; position: relative; left: 1.7% !important; background-color: #F0B258; margin-top: 0.6em">OR</h5>
            <div style="border: 2px solid #FFFFFF; padding: 5px; border-radius: 5px; position: relative; width: 96%; left: 2%; top: 3px;">
              <h5 class="text-left" style="position:relative; margin-top:0px !important; margin-left:0em; width:100%">BGG USERNAME</h5>
              <input type="text" id="uname" name="uname" style="position: relative; margin-top: -5px; width: 100%; margin-left: 0em; height: 2em; font-family: DINRegular;" pattern="[A-Za-z0-9]+" onkeydown="if(['Space'].includes(arguments[0].code)){return false;}"/>
            </div-->
            <!--button class="btn btn-outline-primary" style="position:relative; margin-top:0em;margin-bottom:0.5em; right:0px" onClick="checkUserFillData();">SEARCH</button-->
            <button onClick="checkUserFillData();" class="btn_submit" style="position:relative; margin-top:-1em;margin-bottom:0.5em; right:0px"><img src="images/btn_img.png" class="img-fluid" width="70" /></button>
            </div>
          </div>
        </div>`)
        hideloader();
        sheet_Id = ""
        user_name = ""
        return
      } else {

        //console.log(localStorage.getItem("earshot_boardgames"), " --- ", loadType)
        /* if(loadType == "normal" && localStorage.getItem("earshot_boardgames") != null) { */
        //console.log(localStorage.getItem("zsheet_url"), " --- ", loadType)
        if(loadType == "normal" && localStorage.getItem("zsheet_url") == window.location.href) {
        /* if(loadType == "normal" && store.get('earshot_boardgames') != "undefined") { */
        /* if(loadType == "normal" && store.get('earshot_bggData').bgg_boardGames != "undefined") { */

          //console.log("loading cache data")

          // Hide the top border
          document.getElementById('page-header').style.display = 'none'
          document.getElementById('page-footer').style.display = 'none'
          

          // Load data
          //console.log("Loading data from local storage - checkUserQueryString")
          
          /* boardgameBasicData = JSON.parse(localStorage.getItem("earshot_boardgameBasicData"));
          boardgames = shuffleGameBasedonOwn(shuffleArray(JSON.parse(localStorage.getItem("earshot_boardgames"))), boardgameBasicData); */

          boardgames = shuffleArray(JSON.parse(localStorage.getItem("earshot_boardgames"))), 


          //console.log(boardgames, " cache")


          /* boardgames = shuffleArray(JSON.parse(store.get('earshot_boardgames').data)); */
          /* boardgames = shuffleArray(JSON.parse(store.get('earshot_bggData').bgg_boardGames)); */

          //boardgames = boardgames[0]
          
          // Soted the game data initially for filtering
          allBoardGames = []
          
          allBoardGames.push(JSON.parse(localStorage.getItem("earshot_boardgames")))
          /* allBoardGames.push(JSON.parse(store.get('earshot_boardgames').data)) */
          /* allBoardGames.push(JSON.parse(store.get('earshot_bggData').bgg_boardGames)) */
          // console.log(boardgames);
          
          boardgameBasicData = JSON.parse(localStorage.getItem("earshot_boardgameBasicData"));

          
          /* boardgameBasicData = JSON.parse(store.get('earshot_boardgameBasicData').data); */
          /* boardgameBasicData = JSON.parse(store.get('earshot_bggData').bgg_boardgameBasicData); */

          gameLoaded = true
          
          //////////////////////////////////////////////////////
          // Batch Update Games to google sheet
          batchUpdateGameList(boardgames)
          //////////////////////////////////////////////////////
          // render pagination
          renderPaginationHTML();
          let boardgamesChunks = boardgames.slice(0, 10);
          $.each(boardgamesChunks, function (index, data) {
            ///////////////////////////////////////////////////
            // changes made 13/6
            renderListViewItem(data);
            ///////////////////////////////////////////////////
          });
          
          // changes made 13/6
          viewSlideShowHTML()

          setTimeout(function() {
            MODE_TYPE = "slideshow"
            idleStatus = true
            if(MODE_TYPE == "slideshow") {
              //console.log("ENTER ---- Here")
              $('.slideshow-slider').slick('slickPlay')
              slideStatus = "cycling"
              hideMenuButtons()
              clickedSlideID = -1
              /////////////////////////////////////////////
              // Hide Filter Box
              hideFilterBox();
              ////////////////////////////////////////////
            }
          }, 350)
          hideloader();
          
        } else /* if(loadType == "refresh") */ {
          //console.log("Loading data from server - checkUserQueryString- ", username)
          $.ajax({
            //url: apiurl, 
            url: 'data.php',
            type: 'POST',
            data: 'username=' + username,
            cache: false,
            dataType: 'JSON',
            success: function (response) {
              //console.log(response.status, " ===== data.php")
              if (response.status == 200) {

                // Hide the top border
                document.getElementById('page-header').style.display = 'none'
                document.getElementById('page-footer').style.display = 'none'


                /* boardgameBasicData = response.boardgameBasicData;
                boardgames = shuffleGameBasedonOwn(shuffleArray(response.boardgame), boardgameBasicData);
                boardgames = boardgames[0] */

                boardgames = shuffleArray(response.boardgame);

                //console.log("loading normal data")

                // Caching browser url
                //console.log(window.location.href, " >>browser url")
                localStorage.setItem("zsheet_url", window.location.href)

                localStorage.setItem("earshot_boardgames", JSON.stringify(response.boardgame))
                /* store.set("earshot_boardgames", { data:JSON.stringify(response.boardgame)}) */
                /* store.set("earshot_bggData", { bgg_boardGames:JSON.stringify(response.boardgame)}) */

                // Soted the game data initially for filtering
                allBoardGames = []
                allBoardGames.push(response.boardgame)
                // console.log(boardgames);
                boardgameBasicData = response.boardgameBasicData;

                

                localStorage.setItem("earshot_boardgameBasicData", JSON.stringify(response.boardgameBasicData))
                /* store.set("earshot_boardgameBasicData", { data:JSON.stringify(response.boardgameBasicData)}) */
                /* store.set("earshot_bggData", { bgg_boardgameBasicData:JSON.stringify(response.boardgameBasicData)}) */

                gameLoaded = true

                //console.log(boardgames[0], " after process")
                
                //////////////////////////////////////////////////////
                // Batch Update Games to google sheet
                batchUpdateGameList(boardgames)
                //////////////////////////////////////////////////////
                // render pagination
                renderPaginationHTML();
                let boardgamesChunks = boardgames.slice(0, 10);
                $.each(boardgamesChunks, function (index, data) {
                  renderListViewItem(data);
                });
                // changes made 13/6
                viewSlideShowHTML()
                
                setTimeout(function() {
                  MODE_TYPE = "slideshow"
                  idleStatus = true
                  if(MODE_TYPE == "slideshow") {
                    //idleStatus = true
                    $('.slideshow-slider').slick('slickPlay')
                    slideStatus = "cycling"
                    hideMenuButtons()
                    clickedSlideID = -1
                    /////////////////////////////////////////////
                    // Hide Filter Box
                    hideFilterBox();
                    ////////////////////////////////////////////
                  }
                }, 350)

                // initiateSlickSlider();
              } else {
                // alert(response.error);
                // $(".cardList").html('<div class="alert alert-danger">'+response.error+'</div>');
                /* $(".cardList").html('<div class="text-center mt-5 pt-5"><h3>NO COLLECTION FOR THIS USER</h3><p>Use correct user to find its game collection.</p></div>') */;
                let messageBody = ""
                if(sheet_Id != "" && user_name == "") {
                  messageBody = "*SHEET ID IS INCORRECT"
                } else if(sheet_Id == "" && user_name != "") {
                  messageBody = "*NO GAME COLLECTION FOR THIS USER"
                }

                $(".cardList").html(`<!--div class="bg-alto header-row-section p-3 position-sticky sticky-top" style="position: relative; z-index:99999 !important; height: 2.5em !important; border-left: 15px solid #ff0000;"></div-->
                <div class="position-sticky sticky-top" style="position: relative; z-index:99999 !important; height: 1em !important"></div>
                <div class="text-center mt-4 pt-4" style="position: relative; top: 1em;">
                  <h4 class="text-center h3 mb-3" style="position:relative;top: 1em; z-index:9; font-family: 'DINRegular'; letter-spacing: -1px; font-weight: 100; color:red">${messageBody}</h4>
                  <!--div class="text-center">Use correct sheet id or username or sheet url to find its game collection.</div>
                  <div id="settingBox" class="text-center mt-4 pt-4" style="width: 60%; position:relative; height: auto; left: 20%; background-color: #F0B25880; box-shadow: 0 0 0 3px #F0B25880, 0 0 0 3px #F0B25820; margin-top: 1em !important;">
                    <div style="border: 2px solid #FFFFFF; padding: 5px; border-radius: 5px; position: relative; width: 96%; left: 2%; top: -10px;">
                      <h5 class="text-left" style="position:relative; margin-top:0px !important; margin-left:0em; width:100%">GOOGLE SPREADSHEET ID</h5>
                      <input type="text" id="usheetId" name="usheetId" style="position: relative; margin-top: -5px; width: 100%; margin-left: 0em; height: 2em; font-family: DINRegular;" pattern="[A-Za-z0-9]+" onkeydown="if(['Space'].includes(arguments[0].code)){return false;}"/>
                    </div>
                    <h5 style="width: 97%; position: relative; left: 1.7% !important; background-color: #F0B258; margin-top: 0em;">OR</h5>
                    <div style="border: 2px solid #FFFFFF; padding: 5px; border-radius: 5px; position: relative; width: 96%; left: 2%; top: 3px;">
                      <h5 class="text-left" style="position:relative; margin-top:0px !important; margin-left:0em; width:100%">GOOGLE SPREADSHEET URL</h5>
                      <input type="text" id="usheeturl" name="usheeturl" style="position: relative; margin-top: -5px; width: 100%; margin-left: 0em; height: 2em; font-family: DINRegular;" pattern="[A-Za-z0-9]+" onkeydown="if(['Space'].includes(arguments[0].code)){return false;}"/>
                    </div> <h5 style="width: 97%; position: relative; left: 1.7% !important; background-color: #F0B258; margin-top: 0.6em;">OR</h5> <div style="border: 2px solid #FFFFFF; padding: 5px; border-radius: 5px; position: relative; width: 96%; left: 2%; top: 3px;">
                      <h5 class="text-left" style="position:relative; margin-top:0px !important; margin-left:0em; width:100%">BGG USERNAME</h5>
                      <input type="text" id="uname" name="uname" style="position: relative; margin-top: -5px; width: 100%; margin-left: 0em; height: 2em; font-family: DINRegular;" pattern="[A-Za-z0-9]+" onkeydown="if(['Space'].includes(arguments[0].code)){return false;}"/>
                    </div-->


                    <h4 class="text-center h3 mb-3" style="position:relative;top: 1em; z-index:9; font-family: 'DINRegular'; letter-spacing: -1px; font-weight: 700;">ENTER YOUR BGG USER NAME, GOOGLE SHEET ID, OR GOOGLE SHEET URL</h4>
          <div id="settingBox" class="text-center mt-4 pt-4" style="width: 60%; position:relative; height: auto; left: 20%;background-color: #FFFFFF; box-shadow: 0 0 0 3px #FFFFFF, 0 0 0 3px #FFFFFF; margin-top: 0em !important; border-radius: 2px;">
            <div style="border: 2px solid #FFFFFF; padding: 5px; border-radius: 5px; position: relative; width: 96%; left: 2%; top: -10px;">
              <!--h5 class="text-left" style="position:relative; margin-top:0px !important; margin-left:0em; width:100%">GOOGLE SPREADSHEET ID</h5-->
              <input class="form-control" type="text" id="usheetId" name="usheetId" style="position: relative; margin-top: 0px; width: 100%;margin-left: 0em; height: 2.5em; font-family: DINRegular;" pattern="[A-Za-z0-9]+" onkeydown="if(['Space'].includes(arguments[0].code)){return false;}"/>
            </div>
            <!--h5 style="width: 97%; position: relative; left: 1.7% !important; background-color: #F0B258; margin-top: 0em">OR</h5>
            <div style="border: 2px solid #FFFFFF; padding: 5px; border-radius: 5px; position: relative; width: 96%; left: 2%; top: 3px;">
              <h5 class="text-left" style="position:relative; margin-top:0px !important; margin-left:0em; width:100%">GOOGLE SPREADSHEET URL</h5>
              <input type="text" id="usheeturl" name="usheeturl" style="position: relative; margin-top: -5px; width: 100%; margin-left: 0em; height: 2em; font-family: DINRegular;" pattern="[A-Za-z0-9]+" onkeydown="if(['Space'].includes(arguments[0].code)){return false;}"/>
            </div>
            <h5 style="width: 97%; position: relative; left: 1.7% !important; background-color: #F0B258; margin-top: 0.6em">OR</h5>
            <div style="border: 2px solid #FFFFFF; padding: 5px; border-radius: 5px; position: relative; width: 96%; left: 2%; top: 3px;">
              <h5 class="text-left" style="position:relative; margin-top:0px !important; margin-left:0em; width:100%">BGG USERNAME</h5>
              <input type="text" id="uname" name="uname" style="position: relative; margin-top: -5px; width: 100%; margin-left: 0em; height: 2em; font-family: DINRegular;" pattern="[A-Za-z0-9]+" onkeydown="if(['Space'].includes(arguments[0].code)){return false;}"/>
            </div-->
            <!--button class="btn btn-outline-primary" style="position:relative; margin-top:0em;margin-bottom:0.5em; right:0px" onClick="checkUserFillData();">SEARCH</button-->
            <button onClick="checkUserFillData();" class="btn_submit" style="position:relative; margin-top:-1em;margin-bottom:0.5em; right:0px"><img src="images/btn_img.png" class="img-fluid" width="70" /></button>





                  </div>
                </div>
               </div>`)
              }
              sheet_Id = ""
              user_name = ""
              hideloader();
            },
          });
        }
      }
    }
    ///////////////////////////////////////////////////////////////////////////////////////////////////
    function removeItemOnce(arr, value) {
      for(var i=0; i < privateDataList.length; i++) {
        var gameDetails = []
        gameDetails.push([String(privateDataList[i]["Game ID"]), String(privateDataList[i]["Game Name"])])
        for (var j=0; j < arr.length; j++) {
          //console.log(arr[j][0], " === ", gameDetails[0][0])
          if(arr[j][0] == gameDetails[0][0]) {
            arr.splice(j, 1);
          }
        }
      }
      return arr;
    }
    function batchUpdateGameList(data) {
      var gameObj = []
      for (var i=0; i < data.length; i++) {

        var eachGame = []
        var objectid = data[i]['@attributes']['objectid'];
        var gameTitle = boardgameBasicData[objectid]['name']

        // New change [Save only the game own]
        var isOwn = boardgameBasicData[objectid].status['@attributes']['own']
        //console.log(isOwn, " isOwn")
        if(isOwn > 0) {
          eachGame.push(String(objectid), String(gameTitle).replace(/[\u{0080}-\u{10FFFF}]/gu,""))
          gameObj.push(eachGame)
        }
      }
      //console.log(gameObj, " isGameOwn")
      if(privateDataList.length < gameObj.length) {
        //console.log(removeItemOnce(gameObj, privateDataList))
        var updateSheetList = removeItemOnce(gameObj, privateDataList)
        var dataList = JSON.stringify(updateSheetList);
        // Call PHP/PYTHON
        $.ajax({ 
          //url: apiurl, 
          url: 'insert_data.php', 
          type:'POST', 
          data:{'sheetId' : sheet_Id, 'sheet' : sheet_Name, 'gamesData' : dataList}, 
          cache: false, 
          success: function (response) {
            //console.log(response)
          }
        })
      } {
        //console.log("Sheet already updated...")
      }
    }
     //////////////////////////////////////////////////////////////////////////////////////////////////
    function hideloader() {
      /* $('.loader-spinner').addClass('d-none'); */
      $('.loader-spinner-text').addClass('d-none');
    }
     //////////////////////////////////////////////////////////////////////////////////////////////////
    function showloader() {
      /* $('.loader-spinner').removeClass('d-none'); */
      $('.loader-spinner-text').removeClass('d-none');
    }
     //////////////////////////////////////////////////////////////////////////////////////////////////
    function renderPaginationHTML() {
      
      const detectDeviceType = () =>
      /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
        ? 'Mobile'
        : 'Desktop';
      //console.log(detectDeviceType()); 
      deviceType = detectDeviceType()


      let per_page_items = 10;
      let totalPages = Math.floor( (boardgames.length / per_page_items));
      let extraPosts = (boardgames.length % per_page_items);
      totalPages = (extraPosts > 0 ) ? totalPages + 1 : totalPages;
      var paginationHTML = '';
      var startIndex = 0;
      var endIndex = totalPages > 5 ? 5 : totalPages;
      var currentPageNumber = (paged + 1);
      
      //console.log("currentPageNumber ", currentPageNumber);

  
      
      if(totalPages > 5) {
        if(currentPageNumber >= (totalPages-3)){
          var startIndex = totalPages-5;
          var endIndex = totalPages;
        } else if (currentPageNumber > 2) {
          startIndex = (currentPageNumber - 3);
          endIndex = (currentPageNumber + 2);
        }
      } else {
        endIndex = totalPages
      }

      // console.log("startIndex ", startIndex);
      // console.log("endIndex ", endIndex);

      for (loop = startIndex; loop < endIndex; loop++) {
        let active = (loop == paged) ? 'active' : '';
        if (paginationHTML == "") { paginationHTML = ' <span class="line"></span> '; }
        paginationHTML += "<a href='javascript:;' class='page-number " + active + "' data-paged='" + loop + "'> " + (loop + 1) + " </a> <span class='line'></span> ";
      }
      if(paged == (totalPages-1) ){
        $(".page-next").addClass('disabled-link');
      }else{
        $(".page-next").removeClass('disabled-link');
      }
      if(paged == 0 ){
        $(".page-pre").addClass('disabled-link');
      }else{
        $(".page-pre").removeClass('disabled-link');
      }
      if(deviceType == "Desktop") {
        $('.pagination-pages').html(paginationHTML);
      } else {
        paginationHTML = '<span class="line"></span>'
        /* paginationHTML += "<a class='page-number " + ((paged+1) + "/" + totalPages) +"'> " + ((paged+1) + "/" + totalPages)  + "</a><span class='line'></span>" */
        let active = 'active';
        paginationHTML += "<a class='page-number " + (active) +"'>" + (paged+1) + "</a>" + ("/" + totalPages) + "<span class='line'></span>"
        $('.pagination-pages').html(paginationHTML);
      }
      $('.header-row-section').removeClass('d-none');
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function renderRealetedBoardGameSlider() {
      $('.related_games').html();
      var suggestedGamesHTML = '';
      var startIndex = Math.floor(Math.random() * boardgames.length);
      if(startIndex > (boardgames.length-10) ){ startIndex = boardgames.length-10; }
      // console.log(startIndex, boardgames);
      for (var loop = 0; loop < 10; loop++) {
        if (boardgames[startIndex]) {
          data = boardgames[startIndex];
          var objectid = data['@attributes']['objectid'];
          
          var isOwn = boardgameBasicData[objectid].status['@attributes']['own']
          //if(isOwn == 0) {return}
          //console.log(isOwn, " >>>>>")
          if(isOwn > 0) {
            suggestedGamesHTML += `<div class="slider_item"><div class="image-outer"><a href="javascript:;" class="view-details" data-objectid="${objectid}"><img src="${data.image}" class="img-fluid" id="sliderImg"></a></div><a href="javascript:;" class="text-primary text-uppercase font-DINCondensed text-truncate m-0 p-2 text-center overflow-hidden text-nowrap slide_item_title view-details" data-objectid="${objectid}">${getBoardGameName(data)}</a></div>`;
          }
          startIndex += 1;
        }
      }
      $('.related_games').html(suggestedGamesHTML);
      initiateRelatedGamesSlider();
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function viewSearchPanel() {
      //$("#searchPanel").slideToggle("fast");

      

      $('#myModal2').modal('show');

      // Make the button active
      if(MODE_TYPE == "list") {
        /* document.getElementById("btnFindList").style.backgroundColor = "#3874b5"
        document.getElementById("btnFindList").style.color = "#ffffff"
        document.getElementById("btnFindList").style.color = "#3874b5" */
        document.getElementById("btnFindList").classList.remove("btn-outline-primary");
        document.getElementById("btnFindList").classList.add("btn-outline-primary-active");

      } else {

        /* if(document.getElementById("btnFindSlide").style.opacity == 0) {return} */

        document.getElementById("btnFindSlide").classList.remove("btn-outline-primary");
        document.getElementById("btnFindSlide").classList.add("btn-outline-primary-active");

        
        // on Filter button click
        /* $('.slideshow-slider').slick('slickPause');
        slideStatus = "active" */
      }

      

      // Set the default values
      var cBoxPlayerStat = document.getElementById("cBoxPlayer").checked;
      if(cBoxPlayerStat == true) {
        document.getElementById('playerTotal').innerHTML = playerCount
      } else {
        document.getElementById('playerTotal').innerHTML = ""
      }

      var cBoxTimeStat = document.getElementById("cBoxTime").checked;
      if(cBoxTimeStat == true) {
        document.getElementById("timeTotal").innerHTML = timeCount
      } else {
        document.getElementById("timeTotal").innerHTML = ""
      }
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function onIncreasePlayers() {
      playerCount++
      // Set the default values
      document.getElementById('playerTotal').innerHTML = playerCount
      filterGamesOnPlayerTime()
    }
    function onDecreasePlayers() {
      if(playerCount > 1) {
        playerCount--
      }
      // Set the default values
      document.getElementById('playerTotal').innerHTML = playerCount
      filterGamesOnPlayerTime()
    }
    // Time
    function onIncreaseTime() {
      timeCount += 15
      // Set the default values
      document.getElementById("timeTotal").innerHTML = timeCount
      filterGamesOnPlayerTime()
    }
    function onDecreaseTime() {
      if(timeCount > 15) {
        timeCount -= 15
      }
      // Set the default values
      document.getElementById("timeTotal").innerHTML = timeCount
      filterGamesOnPlayerTime()
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function filterGamesOnPlayerTime() {
      //console.log(playerCount, " ---- ", timeCount)

      // Show search filter
      document.getElementById("searchFilter").style.display = "block"
      // Disable view details page from slideshow
      //clickedSlideID = -1


      //return;

      var filterTimeout = setTimeout(function() {

        $(".cardList").html("")
        $(".cardList").scrollTop(0)

        //setTimeout(function() {
        //if(MODE_TYPE == "list") {
          RenderListView()
        //} else if(MODE_TYPE == "slideshow") {
          RenderSlideshowView()
        //}
        //}, 250)
      }, 250)
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function RenderSlideshowView() {
      if($('.slideshow-slider').html() != ''){
        $('.slideshow-slider').slick('unslick').html('');
      }
      //////////////////////////////////////////////////////////////////////////////

      //console.log("Game Render")

      // New Check
      var cBoxPlayerStat = document.getElementById("cBoxPlayer").checked
      var cBoxTimeStat = document.getElementById("cBoxTime").checked
      var cBoxCoStat = document.getElementById("cBoxCo").checked
      var cBoxStategyStat = document.getElementById("cBoxStrategy").checked
      var cBoxStoryStat = document.getElementById("cBoxStory").checked
      var cBoxPartyStat = document.getElementById("cBoxParty").checked

      //////////////////////////////////////////////////////////////////////////////
      
      // Show games only whose showcase is true in spreadsheet
      // Filter the games
      var filterGames = []
      $.each(boardgames, function(index, data) {
      /* $.each(filterBoardGames, function(index, data) { */
      //$.each(allBoardGames[0], function(index, data) {
        var objectid = data['@attributes']['objectid'];

        var isOwn = boardgameBasicData[objectid].status['@attributes']['own']
        //if(isOwn == 0) {return}
        
        if(privateDataList.length == 0) {
          if(isOwn > 0) {
            filterGames.push(data)
          }
        } else {
          if(cBoxPlayerStat == false && cBoxTimeStat == false && cBoxCoStat == false && cBoxStategyStat == false && cBoxStoryStat == false && cBoxPartyStat == false) {
            $.each(privateDataList, function (index, row) {
              if (row["Game ID"] == objectid && row["Showcase"] == "TRUE") {
                if(isOwn > 0) {
                  filterGames.push(data)
                }
              }
            });
          } else {
            if(isOwn > 0) {
              filterGames.push(data)
            }
          }
        }
      });
      //////////////////////////////////////////////////////////////////////////////
      //console.log(filterGames, " ---- ")
      if(filterGames.length > 0) {
        //$.each(boardgames, function(index, data) {
        /* let slickChunks = filterGames.slice(0, 10); */
        $.each(filterGames, function(index, data) {
        /* $.each(slickChunks, function(index, data) { */
          var objectid = data['@attributes']['objectid'];
          var description = data.description;
          if (description.length > 260) {
            textContent = description.substr(0,250) + '...';
          }
          var gameRatingAverage = getBoardGameRatingAverage(data);

          // Prev Logic
          /* var ratingInPercentage = ((gameRatingAverage - 5)*5/2) * 14; */
          // New Logic
          var ratingInPercentage = ((gameRatingAverage - 5)*5/3) * 20;
          
          if(ratingInPercentage < 0) {
            ratingInPercentage = 0
          } else if(ratingInPercentage > 100) {
            ratingInPercentage = 100
          }
          /////////////////////////////////////////////////////////////////////////////////////
          var playerStats = (data.minplayers == data.maxplayers) ? data.maxplayers : data.minplayers+"-"+data.maxplayers;
          var playtimeStats = (data.minplaytime == data.maxplaytime) ? data.maxplaytime : data.minplaytime+"-"+data.maxplaytime;
          $('.slideshow-slider').append(`<div class="slider_item"><div class="slider_item_wrapper"><div class="image-outer"><a href="javascript:;" class="games-slider-item view-details" data-sourceType="slideshow" data-objectid="${objectid}"><img src="${data.image}" class="img-fluid" id="sliderImg" data-BoardgamesId="${objectid}"></a></div><div onClick="showFind(${objectid})" class="slideshow_item_content"><h4>${getBoardGameName(data)}</h4><a href="javascript:;" class="view-details" data-objectid="${objectid}" data-sourceType="slideshow">${getBoardGameDesigner(data)}</a>
          <p>${description}</p>
        </div>
          <!--div class="d-flex justify-space-between slideshow_bottom"-->
          <div class="d-flex justify-content-between slideshow_bottom">
            <div class="bottom_left_side">
              <div class="text-right" data-objectid="${objectid}"><div onClick="showFind(${objectid})" class="metaGroup"><span><img src="./images/earshot-games_player.png" width="35px">${playerStats}</span><span><img src="./images/earshot-games_time.png" width="35px">${playtimeStats}</span><span><img src="./images/earshot-games_age.png"  width="35px">${data.age}+</span>
                ${data.boardgamemechanic != undefined && data.boardgamemechanic.includes("Cooperative Game") == true
                  ?
                  `<span><img src="./images/earshot-games_coop.png?version=1.1.0" width="35px"></span>`
                  : ``}
              </div></div> 
              <!--div class="ratingWrapper"-->
              <div id="${objectid}_slide" class="ratingWrapper" onClick='toggleRating(event, ${ratingInPercentage}, ${gameRatingAverage})'>
                <div id='star_slide' class="ratingStar" style="width: ${ratingInPercentage}%"><span>&#x2605;&#x2605;&#x2605;&#x2605;&#x2605;</span></div> 
                </div>           
            </div>  
            <div onClick="showFind(${objectid})" class="barcode">	
              <div class="qrcode" id="slide_${objectid}_barcode"></div>
            </div>      
          </div>
          </div>

          </div>
          `);
          renderQRCode(`slide_${objectid}_barcode`, objectid);
        });
      } else {
        //clickedSlideID = -1
        $(".slideshow-slider").html('<div class="text-center mt-4 pt-4"><h2 class="text-center" style="color:red;">NO GAME FOUND BASED ON FILTER CRITERIA.</h2></div>')
      }
      ////////////////////////////////////////////
      initiateSlideShowSlider();
      ////////////////////////////////////////////
      // Hide search filter loader
      // Hide search filter
      document.getElementById("searchFilter").style.display = "none"
      ////////////////////////////////////////////
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function combinations(str) {
        var fn = function(active, rest, a) {
            if (!active && !rest)
                return;
            if (!rest) {
                a.push(active);
            } else {
                fn(active + rest[0], rest.slice(1), a);
                fn(active, rest.slice(1), a);
            }
            return a;
        }
        return fn("", str, []);
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function RenderListView() {
      //boardgames = shuffleArray(boardgames);
      //console.log(boardgames);
      //boardgameBasicData = boardgames.boardgameBasicData;

      //////////////////////////////////////////////////////
      // Player And Time
      // Filter modified based on the items active
      var cBoxPlayerStat = document.getElementById("cBoxPlayer").checked
      var cBoxTimeStat = document.getElementById("cBoxTime").checked



      var cBoxCoStat = document.getElementById("cBoxCo").checked
      var cBoxStategyStat = document.getElementById("cBoxStrategy").checked
      var cBoxStoryStat = document.getElementById("cBoxStory").checked
      var cBoxPartyStat = document.getElementById("cBoxParty").checked



      /* var cBoxAcStat = document.getElementById("cBoxAc").checked
      var cBoxWpStat = document.getElementById("cBoxWp").checked
      var cBoxRbStat = document.getElementById("cBoxRb").checked */


      /* var cBoxDbStat = document.getElementById("cBoxDb").checked
      var cBoxStStat = document.getElementById("cBoxSt").checked
      var cBoxDedStat = document.getElementById("cBoxDed").checked */
       //////////////////////////////////////////////////////

        /* var str = "cawrdse" */
        /* var str = "gspc"
        console.log(combinations(str), " VALUES") */
        
      ///////////////////////////////////////////////////////////////////////////////////////////////////
        // New Values
        /* g = strategic
        s = storytelling
        p = party
        c = coop
        'gspc', 'gsp', 'gsc', 'gs', 'gpc', 'gp', 'gc', 'g', 'spc', 'sp', 'sc', 's', 'pc', 'p', 'c' 
        */
      ///////////////////////////////////////////////////////////////////////////////////////////////////

      var filterBoardGames = []
      //filterBoardGames = []
      //console.log(allBoardGames[0], " all games ")
      $.each(allBoardGames[0], function(index, data) {
        var objectid = data['@attributes']['objectid'];

        var isOwn = boardgameBasicData[objectid].status['@attributes']['own']
        if(isOwn == 0) {return}


        var playerStats = (data.minplayers == data.maxplayers) ? data.maxplayers : data.minplayers
        var playerMin = data.minplayers
        var playerMax = data.maxplayers
        var playtimeStats = (data.minplaytime == data.maxplaytime) ? data.maxplaytime : data.minplaytime
        var timeMin = data.minplaytime
        var timeMax = data.maxplaytime
        //console.log(playerCount, " <= ", playerMin, " && ", playerMax)

        // Mechanics array
        //var getAllMechanics = data.boardgamemechanic;

       /*  console.log(data.boardgamemechanic, " all mechanics")
        console.log(data.boardgamecategory, " all category") */

        //////////////////////////////////////////////////////////////////////////////////////////////
        /* // Player And Time
        // Filter modified based on the items active
        var cBoxPlayerStat = document.getElementById("cBoxPlayer").checked
        var cBoxTimeStat = document.getElementById("cBoxTime").checked */
        //////////////////////////////////////////////////////////////////////////////////////////////
        /* c = cBoxCoStat
        a = cBoxAcStat
        w = cBoxWpStat
        r = cBoxRbStat
        d = cBoxDbStat
        s = cBoxStStat
        e = cBoxDedStat */
        //////////////////////////////////////////////////////////////////////////////////////////////
        // Mechanics
        /* var cBoxCoStat = document.getElementById("cBoxCo").checked
        var cBoxAcStat = document.getElementById("cBoxAc").checked
        var cBoxWpStat = document.getElementById("cBoxWp").checked
        var cBoxRbStat = document.getElementById("cBoxRb").checked
        var cBoxDbStat = document.getElementById("cBoxDb").checked
        var cBoxStStat = document.getElementById("cBoxSt").checked
        var cBoxDedStat = document.getElementById("cBoxDed").checked

        var str = "co-" + cBoxCoStat + "ac-" + cBoxAcStat

        console.log(combinations(str), " VALUES")
         */
        /////////////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////////////
        // Previous Logic
        /* if(cBoxPlayerStat == true && cBoxTimeStat == true) {
          if(playerCount <= playerMax && timeCount <= timeMax) {
            filterBoardGames.push(data)
          }
        } else if(cBoxPlayerStat == true && cBoxTimeStat == false) {
          if(playerCount <= playerMax) {
            filterBoardGames.push(data)
          }
        } else if(cBoxPlayerStat == false && cBoxTimeStat == true) {
          if(timeCount <= timeMax) {
            filterBoardGames.push(data)
          }
        } else if(cBoxPlayerStat == false && cBoxTimeStat == false) {
          filterBoardGames.push(data)
        } */
        //////////////////////////////////////////////////////////////////////////////////////////////
        // Comment after function change
        //return;
        //////////////////////////////////////////////////////////////////////////////////////////////

        // New Logic
        if(cBoxPlayerStat == true && cBoxTimeStat == true) {
          /* console.log(playerCount, " P ", playerMin, " PM ", playerMax)
          console.log(timeCount, " T ", timeMin, " TM ", timeMax) */
          if(timeMin == timeMax) {
            var modValue = (timeMin % 15)
            if(modValue != 0) {
              //timeMin = timeMax - modValue
              //timeMax = timeMin + 1
            }
          }
          /* if((playerCount >= playerMin && playerCount <= playerMax) && (timeCount >= timeMin && timeCount <= timeMax)) { */
          
          /* if((playerCount >= playerMin && playerCount <= playerMax) && (timeCount >= timeMin && timeCount <= timeMax)) { */
          if((playerCount >= playerMin && playerCount <= playerMax) && (timeCount >= timeMin && timeCount <= timeMax)) {
          
            //console.log("ENTER HERER - ", timeCount, " >= ", timeMin)

          /* var timeCondition = timeMin == timeMax ? (timeCount <= timeMax) : (timeCount >= timeMin && timeCount <= timeMax)
          if((playerCount >= playerMin && playerCount <= playerMax) && (timeCount <= timeMax)) { */
            ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            ///////////////////////
            ///////////////////////
            /* g = strategic
              s = storytelling
              p = party
              c = coop
              'gspc', 'gsp', 'gsc', 'gs', 'gpc', 'gp', 'gc', 'g', 'spc', 'sp', 'sc', 's', 'pc', 'p', 'c' 
              */
            ///////////////////////
            ///////////////////////
            ///////////////////////
            if(cBoxStategyStat && cBoxStoryStat && cBoxPartyStat && cBoxCoStat)/* "gspc" */ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxStoryStat && cBoxPartyStat)/* "gsp" */ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxStoryStat && cBoxCoStat) /*'gsc'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxStoryStat) /*'gs'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxPartyStat && cBoxCoStat) /*'gpc'*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxPartyStat)/*'gp'*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxCoStat)/*'gc'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat) /*'g'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStoryStat && cBoxPartyStat && cBoxCoStat) /*'spc'*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStoryStat && cBoxPartyStat)/*'sp'*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStoryStat && cBoxCoStat)/*'sc'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStoryStat) /*'s'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxPartyStat && cBoxCoStat)/*pc*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxPartyStat)/*p*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxCoStat)/*c*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true)) {
                filterBoardGames.push(data)
              }
            } else {
              filterBoardGames.push(data)
            }
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////

          ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
          ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
          ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            
          } 


        } else if(cBoxPlayerStat == true && cBoxTimeStat == false) {
          if(playerCount >= playerMin && playerCount <= playerMax) {
            ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            if(cBoxStategyStat && cBoxStoryStat && cBoxPartyStat && cBoxCoStat)/* "gspc" */ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxStoryStat && cBoxPartyStat)/* "gsp" */ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxStoryStat && cBoxCoStat) /*'gsc'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxStoryStat) /*'gs'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxPartyStat && cBoxCoStat) /*'gpc'*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxPartyStat)/*'gp'*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxCoStat)/*'gc'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat) /*'g'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStoryStat && cBoxPartyStat && cBoxCoStat) /*'spc'*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStoryStat && cBoxPartyStat)/*'sp'*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStoryStat && cBoxCoStat)/*'sc'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStoryStat) /*'s'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxPartyStat && cBoxCoStat)/*pc*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxPartyStat)/*p*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxCoStat)/*c*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true)) {
                filterBoardGames.push(data)
              }
            } else {
              filterBoardGames.push(data)
            }
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
          ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
          ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
          ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
          }

        } else if(cBoxPlayerStat == false && cBoxTimeStat == true) {
          if(timeMin == timeMax) {
            var modValue = (timeMin % 15)
            if(modValue != 0) {
              //timeMin = timeMax - modValue
            }
          }
          /* if(timeCount >= timeMin && timeCount <= timeMax) { */
            if(timeCount >= timeMin && timeCount <= timeMax) {
            ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            if(cBoxStategyStat && cBoxStoryStat && cBoxPartyStat && cBoxCoStat)/* "gspc" */ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxStoryStat && cBoxPartyStat)/* "gsp" */ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxStoryStat && cBoxCoStat) /*'gsc'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxStoryStat) /*'gs'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxPartyStat && cBoxCoStat) /*'gpc'*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxPartyStat)/*'gp'*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxCoStat)/*'gc'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat) /*'g'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStoryStat && cBoxPartyStat && cBoxCoStat) /*'spc'*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStoryStat && cBoxPartyStat)/*'sp'*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStoryStat && cBoxCoStat)/*'sc'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStoryStat) /*'s'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxPartyStat && cBoxCoStat)/*pc*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxPartyStat)/*p*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxCoStat)/*c*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true)) {
                filterBoardGames.push(data)
              }
            } else {
              filterBoardGames.push(data)
            }
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
          ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
          ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
          ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


          }

        } else if(cBoxPlayerStat == false && cBoxTimeStat == false) {

          ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
          ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
          ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
          ///////////////////////
            ///////////////////////
            ///////////////////////
            if(cBoxStategyStat && cBoxStoryStat && cBoxPartyStat && cBoxCoStat)/* "gspc" */ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxStoryStat && cBoxPartyStat)/* "gsp" */ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxStoryStat && cBoxCoStat) /*'gsc'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxStoryStat) /*'gs'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxPartyStat && cBoxCoStat) /*'gpc'*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxPartyStat)/*'gp'*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat && cBoxCoStat)/*'gc'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStategyStat) /*'g'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Area Majority / Influence") == true || data.boardgamemechanic.includes("Worker Placement") == true || data.boardgamemechanic.includes("Network and Route Building") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStoryStat && cBoxPartyStat && cBoxCoStat) /*'spc'*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStoryStat && cBoxPartyStat)/*'sp'*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStoryStat && cBoxCoStat)/*'sc'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxStoryStat) /*'s'*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Storytelling") == true || data.boardgamemechanic.includes("Role Playing") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxPartyStat && cBoxCoStat)/*pc*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true) && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxPartyStat)/*p*/ {
              if(data.boardgamemechanic != undefined && data.boardgamecategory != undefined && (data.boardgamecategory.includes("Party Game") == true)) {
                filterBoardGames.push(data)
              }
            } else if(cBoxCoStat)/*c*/ {
              if(data.boardgamemechanic != undefined && (data.boardgamemechanic.includes("Cooperative Game") == true)) {
                filterBoardGames.push(data)
              }
            } else {
              filterBoardGames.push(data)
            }
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
            ///////////////////////
          ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
          ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
          ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        }
        //////////////////////////////////////////////////////////////////////////////////////////////
      });

      //////////////////////////////////////////////////////
      if(filterBoardGames.length > 0) {
        // render pagination
        boardgames = filterBoardGames
        //console.log(filterBoardGames.length, " ---- ", boardgames.length)
        //boardgames = shuffleArray(boardgames);
        //boardgameBasicData = boardgames.boardgameBasicData;
        //console.log(boardgames.length)
        paged = 0

        /* document.getElementById("prevLink").innerHTML = "Prev &nbsp;"
        document.getElementById("nextLink").innerHTML = "&nbsp; NEXT" */
        document.getElementById("prevLink").innerHTML = "Prev"
        document.getElementById("nextLink").innerHTML = "NEXT"

        renderPaginationHTML();
        let boardgamesChunks = boardgames.slice(0, 10);
        $.each(boardgamesChunks, function (index, data) {
          renderListViewItem(data);
        });
        //boardgames.splice(0)
      } else {
        boardgames = filterBoardGames
        if(boardgames.length == 0) {
          paged = -1
        }
        document.getElementById("prevLink").innerHTML = ""
        document.getElementById("nextLink").innerHTML = ""
        $('.pagination-pages').html("");
        $(".cardList").html('<div class="text-center mt-4 pt-4"><h2 class="text-center" style="color:red;">NO GAME FOUND BASED ON FILTER CRITERIA.</h2></div>')
      }
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function viewSlideShowHTML() {
      // Hide the Filter modal if open
      $('#myModal2').modal('hide');

      MODE_TYPE = 'slideshow'
      

      if($('.slideshow-slider').html() != ''){
        $('.slideshow-slider').slick('unslick').html('');
      }

      //////////////////////////////////////////////////////////////////////////////
      // New Check
      var cBoxPlayerStat = document.getElementById("cBoxPlayer").checked
      var cBoxTimeStat = document.getElementById("cBoxTime").checked
      var cBoxCoStat = document.getElementById("cBoxCo").checked
      var cBoxStategyStat = document.getElementById("cBoxStrategy").checked
      var cBoxStoryStat = document.getElementById("cBoxStory").checked
      var cBoxPartyStat = document.getElementById("cBoxParty").checked
      //////////////////////////////////////////////////////////////////////////////

      //console.log(privateDataList, " --- ", privateDataList.length)
      // Show games only whose showcase is true in spreadsheet
      // Filter the games
      var filterGames = []
      $.each(boardgames, function(index, data) {
      /* $.each(filterBoardGames, function(index, data) { */
      //$.each(allBoardGames[0], function(index, data) {
        var objectid = data['@attributes']['objectid'];

        //console.log(boardgameBasicData[objectid].status['@attributes']['own'], " game list")
        var isOwn = boardgameBasicData[objectid].status['@attributes']['own']

        if(privateDataList.length == 0) {
          if(isOwn > 0) {
            filterGames.push(data)
          }
        } else {
          if(cBoxPlayerStat == false && cBoxTimeStat == false && cBoxCoStat == false && cBoxStategyStat == false && cBoxStoryStat == false && cBoxPartyStat == false) {
            $.each(privateDataList, function (index, row) {
              if (row["Game ID"] == objectid && row["Showcase"] == "TRUE") {
                if(isOwn > 0) {
                  filterGames.push(data)
                }
              }
            });
          } else {
            if(isOwn > 0) {
              filterGames.push(data)
            }
          }
        }
      });
      //////////////////////////////////////////////////////////////////////////////
      //console.log(filterGames.length, " filterGames")
      if(filterGames.length > 0) {
        //$.each(boardgames, function(index, data) {
        //let slickChunks = boardgames.slice(0, 10);
        /* let slickChunks = filterGames.slice(0, 10); */
        $.each(filterGames, function(index, data) {
       /*  $.each(slickChunks, function(index, data) { */
          var objectid = data['@attributes']['objectid'];

          var description = data.description;
          if (description.length > 260) {
            textContent = description.substr(0,250) + '...';
          }
          var gameRatingAverage = getBoardGameRatingAverage(data);

          //var ratingInPercentage = ((gameRatingAverage*100)/5);

          /////////////////////////////////////////////////////////////////////////////////////

          //var ratingInPercentage = ((gameRatingAverage - 6)*5/2) * 20;
          // Prev Logic
          /* var ratingInPercentage = ((gameRatingAverage - 5)*5/2) * 14; */
          // New Logic
          var ratingInPercentage = ((gameRatingAverage - 5)*5/3) * 20;

          if(ratingInPercentage < 0) {
            ratingInPercentage = 0
          } else if(ratingInPercentage > 100) {
            ratingInPercentage = 100
          }

          /////////////////////////////////////////////////////////////////////////////////////
          //var nDate = moment(new Date()).format("hh:mm A")
          //document.getElementById('sliderDate').innerHTML = nDate;
            let mTimerTimeout = setTimeout(updateTimerTimer, 10)
            function updateTimerTimer() {
              clearTimeout(mTimerTimeout)
              document.getElementById("sliderDate").innerHTML = moment(new Date()).format("hh:mm A")
              mTimerTimeout = setTimeout(updateTimerTimer, (1000))
            }
          /////////////////////////////////////////////////////////////////////////////////////
          

          var playerStats = (data.minplayers == data.maxplayers) ? data.maxplayers : data.minplayers+"-"+data.maxplayers;
          var playtimeStats = (data.minplaytime == data.maxplaytime) ? data.maxplaytime : data.minplaytime+"-"+data.maxplaytime;

          $('.slideshow-slider').append(`<div class="slider_item"><div class="slider_item_wrapper"><div class="image-outer"><a href="javascript:;" class="games-slider-item view-details" data-sourceType="slideshow" data-objectid="${objectid}"><img src="${data.image}" class="img-fluid" id="sliderImg" data-BoardgamesId="${objectid}"></a></div><div onclick="showFind(${objectid});" class="slideshow_item_content"><h4>${getBoardGameName(data)}</h4><a href="javascript:;" class="view-details" data-objectid="${objectid}" data-sourceType="slideshow">${getBoardGameDesigner(data)}</a>
          <p>${description}</p>
        </div>
          <!--div class="d-flex justify-space-between slideshow_bottom"-->
          <div class="d-flex justify-content-between slideshow_bottom">
            <div class="bottom_left_side">
              <div class="text-right" data-objectid="${objectid}"><div onClick="showFind(${objectid})" class="metaGroup"><span><img src="./images/earshot-games_player.png" width="35px">${playerStats}</span><span><img src="./images/earshot-games_time.png"width="35px">${playtimeStats}</span><span><img src="./images/earshot-games_age.png"  width="35px">${data.age}+</span>
                ${data.boardgamemechanic != undefined && data.boardgamemechanic.includes("Cooperative Game") == true
                  ?
                  `<span><img src="./images/earshot-games_coop.png?version=1.1.0" width="35px"></span>`
                  : ``}  
              </div></div> 
              <!--div class="ratingWrapper"-->
              <div id="${objectid}_slide" class="ratingWrapper" onClick='toggleRating(event, ${ratingInPercentage}, ${gameRatingAverage})'>
                <div id='star_slide' class="ratingStar" style="width: ${ratingInPercentage}%"><span>&#x2605;&#x2605;&#x2605;&#x2605;&#x2605;</span></div> 
                </div>          
            </div>  
            <div onClick="showFind(${objectid})" class="barcode">	
              <div class="qrcode" id="slide_${objectid}_barcode"></div>
            </div>      
          </div>
          </div>

          </div>
          `);

          renderQRCode(`slide_${objectid}_barcode`, objectid);
        });
      } else {
        $(".slideshow-slider").html('<div class="text-center mt-4 pt-4"><h2 class="text-center" style="color:red;">NO GAME FOUND BASED ON FILTER CRITERIA.</h2></div>')
      }

      // Manual SlideShow View
      $("body").addClass("AnimateView");
      $(".list-slideshow-section").removeClass("d-none");
      $(".list-view-section").addClass("d-none");
      $(".detail-view-section").addClass("d-none");


      ///////////////////////////////////////////////
      /* slideStatus = "cycling"
      hideMenuButtons() */
      ///////////////////////////////////////////////

      ////////////////////////////////////////////
      initiateSlideShowSlider();
      ////////////////////////////////////////////

      // Automatic Slideshow View
      // toggleSlideShowView();
    }

    function showFind(id) {
      //console.log("Show Find - ", id)
      //console.log("show Find Click")
      if(MODE_TYPE == "slideshow") {
        clickedSlideID = id;
        $.each(boardgames, function (index, data) {
          var data_objectid = data['@attributes']['objectid'];
          if (clickedSlideID == data_objectid) {
            renderDetailsViewHTML(data);
            return;
          }
        });
        /* if(clickedSlideID != id) {
          clickedSlideID = id
          viewSearchPanel()
        } else {
          //console.log("VD-1")
          clickedSlideID = id;
          $.each(boardgames, function (index, data) {
            var data_objectid = data['@attributes']['objectid'];
            if (clickedSlideID == data_objectid) {
              renderDetailsViewHTML(data);
              return;
            }
          });
        } */
      }
    }
    
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function toggleSlideShowView() {
      //if(document.getElementById("btnViewAll").style.opacity == 0) {return}

      MODE_TYPE = 'list'

      if($(".list-slideshow-section").hasClass("d-none")){
        //console.log("if")
        $("body").addClass("AnimateView");
        $(".list-slideshow-section").removeClass("d-none");
        $(".list-view-section").addClass("d-none");
        $(".detail-view-section").addClass("d-none");
      }else{
        //console.log("else- ", paged)
        $(".list-slideshow-section").addClass("d-none");
        $(".detail-view-section").addClass("d-none");
        if (paged) {
          resetListPageContent(paged);
        } 
        $(".list-view-section").removeClass("d-none");
        $("body").removeClass('AnimateView');
      }
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function renderListViewItem(data) {

      //console.log("RENDER LIST")

   

      //if(settingLoaded == false || privateLoaded == false || gameLoaded == false) {return}

      //console.log(data, " data")
      var objectid = data['@attributes']['objectid'];
      //console.log(boardgameBasicData[objectid].status['@attributes']['own'], " game list")
      var isOwn = boardgameBasicData[objectid].status['@attributes']['own']
      //console.log(isOwn, " List View")
      if(isOwn == 0) {return}
      //console.log("Created")
      var boardgameDesc = data.description;
      if (boardgameDesc.length > 700) {
        textContent = boardgameDesc.substr(0, 690) + '...';
        // boardgamesContent = textContent.replace(/^\s+|\s+$/gm,'');
      } else {
        textContent = boardgameDesc;
      }
      // addSliderSlide(data);
      var boardGameDesigner = getBoardGameDesigner(data);
      var boardGameName = getBoardGameName(data);
      var gameRatingAverage = getBoardGameRatingAverage(data);


      ////////////////////////////////////////////////////////////////////////////////////
      //console.log(gameRatingAverage, " >>> game rating average")
      //var ratingInPercentage = ((gameRatingAverage*100)/5);

      /* var ratingInPercentage = (((Math.floor(gameRatingAverage) - 6) * 5/2) * 10) + (((Math.floor(gameRatingAverage) - 6) * 5/2) * 10)
      if(ratingInPercentage > 100) {
        ratingInPercentage = 100
      } */
      /* var ratingInPercentage = 0
      if(gameRatingAverage <= 6) {
        ratingInPercentage = 0
      } else {
        ratingInPercentage = 100
      } */
      ////////////////////////////////////////////////////////////////////////////////////
      // New Rating System
      //var ratingInPercentage = ((gameRatingAverage - 6)*5/2) * 20;

      // Prev logic
      /* var ratingInPercentage = ((gameRatingAverage - 5)*5/2) * 14; */
      // New Logic
      var ratingInPercentage = ((gameRatingAverage - 5)*5/3) * 20;

      if(ratingInPercentage < 0) {
        ratingInPercentage = 0
      } else if(ratingInPercentage > 100) {
        ratingInPercentage = 100
      }

      ////////////////////////////////////////////////////////////////////////////////////
     //console.log(data.boardgamemechanic, " >>> checking for coop")
      ////////////////////////////////////////////////////////////////////////////////////

      var playerStats = (data.minplayers == data.maxplayers) ? data.maxplayers : data.minplayers+"-"+data.maxplayers;
      var playtimeStats = (data.minplaytime == data.maxplaytime) ? data.maxplaytime : data.minplaytime+"-"+data.maxplaytime; 
      //  console.log("ratingInPercentage ", ratingInPercentage);
      $(".cardList").append(`
          <div class="mt-3">
            <div class="card game-card border-0 bg-light" id="list-game-${objectid}">
              <div class="card-header border-0 bg-transparent">
                <div class="row">
                  <div class="col-md-7">
                    <h2 class="view-details game-title pointer-cursor display-5 font-DINCondensed text-primary" data-objectid="${objectid}" data-sourceType="list">${boardGameName} <sup class="text-black font-DINCondensed sup-small">${data.yearpublished}</sup></h2>
                    <h5 class="font-DINCondensed mb-0 game-designer">${boardGameDesigner}</h5>
                  </div>
                  <div class="col-md-5 text-md-right">
                    <div class="text-right" data-objectid="${objectid}"><div class="metaGroup"><span><img src="./images/earshot-games_player.png" width="35px">${playerStats}</span><span><img src="./images/earshot-games_time.png"width="35px">${playtimeStats}</span><span><img src="./images/earshot-games_age.png" width="35px">${data.age}+</span>
                      ${data.boardgamemechanic != undefined && data.boardgamemechanic.includes("Cooperative Game") == true
                      ?
                      `<span><img src="./images/earshot-games_coop.png?version=1.1.0" width="35px"></span>`
                      : ``}
                    </div></div>  
                    <div id="${objectid}" class="ratingWrapper" onClick='toggleRating(event, ${ratingInPercentage}, ${gameRatingAverage})'>
                     
                      <div id="star" class="ratingStar" style="width: ${ratingInPercentage}%"> 
                        <span>&#x2605;&#x2605;&#x2605;&#x2605;&#x2605;</span>
                      </div> 
                      
                    </div>
                  </div>
                </div>                
            </div>
            <div class="card-body">
            <div class="row">
              <div class="col-lg-3">
                <div class="img-box">
                  <img src="${data.image}" class="img-fluid view-details pointer-cursor" data-objectid="${objectid}" data-sourceType="list" >
                </div>  
                <div class="view-details d-none d-md-block" data-objectid="${objectid}" data-sourceType="list"><h5 class="pointer-cursor text-danger m-0 font-DINCondensed text-uppercase">More</h5></div>
              </div>
               <div class="col-lg-9">  
                <div class="font-DINCondensed text-large">${textContent}</div>
               </div>
                <div class="col-12 d-block d-md-none">                
                  <div class="view-details" data-objectid="${objectid}" data-sourceType="list"><h5 class="pointer-cursor text-danger m-0 font-DINCondensed text-uppercase">More</h5></div>
                </div>
              </div>
            </div>
            </div>
          </div>
        </div>
      </div>`);
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function toggleRating(event, _percentage, _bggRating) {
      /* toggleRatingClick = false
      if(clickedSlideID == -1) {return}
      toggleRatingClick = true */
      //console.log("Toggle Rating Click - ", clickedSlideID)
      //console.log(event.target.parentElement.parentElement.id)
      var elm = document.getElementById(event.target.parentElement.parentElement.id)
      //console.log(elm.innerHTML.split('id=')[1].split(" ")[0], " Selected ID ", elm)
      /* var elm = document.getElementById("sss")*/
      RATING_MODE = elm.innerHTML.split('id=')[1].split(" ")[0]
      if(RATING_MODE == null) {return}
      elm.innerHTML = ""
      if(RATING_MODE == '"star"' || RATING_MODE == '"star_d"' || RATING_MODE == '"star_slide"') {
        //RATING_MODE = 'bgg'
        //console.log(elm.innerHTML)
        if(RATING_MODE == '"star"') {
          nDiv = `<div id="bgg" class="ratingStar" style="width:100%"><p>BGG Rating : ${_bggRating.toFixed(2)}</p></div>`
        } else if(RATING_MODE == '"star_d"') {
          nDiv = `<div id="bgg_d" class="ratingStar" style="width:100%"><p>BGG Rating : ${_bggRating.toFixed(2)}</p></div>`
        } else {
          nDiv = `<div id="bgg_slide" class="ratingStar" style="width:100%"><p>BGG Rating : ${_bggRating.toFixed(2)}</p></div>`
        }
      } else {
        //RATING_MODE = 'star'
        if(RATING_MODE == '"bgg"') {
          nDiv = `<div id="star" class="ratingStar" style="width: ${_percentage}%"><span>&#x2605;&#x2605;&#x2605;&#x2605;&#x2605;</span></div>`
        } else if(RATING_MODE == '"bgg_d"') {
          nDiv = `<div id="star_d" class="ratingStar" style="width: ${_percentage}%"><span>&#x2605;&#x2605;&#x2605;&#x2605;&#x2605;</span></div>`
        } else {
          nDiv = `<div id="star_slide" class="ratingStar" style="width: ${_percentage}%"><span>&#x2605;&#x2605;&#x2605;&#x2605;&#x2605;</span></div>`
        }
      }
      elm.innerHTML = nDiv 
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function getBoardGameName(data) {
      var objectid = data['@attributes']['objectid'];
      return boardgameBasicData[objectid]['name'];
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function getBoardGameRatingAverage(data) {
      var objectid = data['@attributes']['objectid'];
      return boardgameBasicData[objectid]['rating'];
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function getBoardGameDesigner(data) {
      if ($.isArray(data.boardgamedesigner)) {
        var boardgamedesigner = '';
        $.each(data.boardgamedesigner, function (index, value) {
          boardgamedesigner += (boardgamedesigner != '') ? ' & ' + value : value;
        });
        return boardgamedesigner;
      } else {
        return data.boardgamedesigner;
      }
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function getBoardGamePublisher(data) {
      if ($.isArray(data.boardgamepublisher)) {
        return data.boardgamepublisher[0];
      } else {
        return data.boardgamepublisher;
      }
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function addSliderSlide(data) {
      var boardGameName = getBoardGameName(data);
      var objectid = data['@attributes']['objectid'];
      $('.image_slider').append(`<div class="slider_item"><div class="image-outer"><a href="javascript:;" class="games-slider-item" data-objectid="${objectid}"><img src="${data.image}" class="img-fluid" id="sliderImg" data-BoardgamesId="${objectid}"></a></div><a href="javascript:;" data-objectid="${objectid}" data-BoardgamesId="${objectid}" class="text-uppercase font-DINCondensed text-truncate m-0 p-2 text-center overflow-hidden text-nowrap slide_item_title games-slider-item">${boardGameName}</a></div>`);
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function initiateSlickSlider() {
      $('.image_slider').slick({
        infinite: true,
        slidesToShow: 5,
        slidesToScroll: 3,
        dots: false,
        arrows: true,
        infinite: 0,
        autoplay: true,
        autoplaySpeed: 1000,
        prevArrow:'<img class="a-left control-c prev slick-prev" src="images/earshot-games_btn_left.png" style="width:25px; height:auto; left:-25px; z-index:1;">',
          nextArrow:'<img class="a-right control-c next slick-next" src="images/earshot-games_btn_right.png" style="width:25px; height:auto; right:-25px; z-index:1;">',
        responsive: [
          {
            breakpoint: 1024,
            settings: {
              slidesToShow: 3,
              slidesToScroll: 3,
              infinite: true,
              dots: false
            }
          },
          {
            breakpoint: 600,
            settings: {
              slidesToShow: 2,
              slidesToScroll: 2
            }
          },
          {
            breakpoint: 480,
            settings: {
              slidesToShow: 1,
              slidesToScroll: 1
            }
          }
          // You can unslick at a given breakpoint now by adding:
          // settings: "unslick"
          // instead of a settings object
        ]
      });
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function initiateSlideShowSlider() {
      //console.log("Start slick anim")

      $('.slideshow-slider').slick({
          infinite: true,
          slidesToShow: 1,
          slidesToScroll: 1,
          autoplay: true,
          autoplaySpeed: 5000,
          prevArrow:'<img class="a-left control-c prev slick-prev" src="images/earshot-games_btn_left.png" style="width:30px; height:auto; left:-28px; z-index:1;">',
          nextArrow:'<img class="a-right control-c next slick-next" src="images/earshot-games_btn_right.png" style="width:30px; height:auto; right:-28px; z-index:1;">',
          responsive: [
            {
              breakpoint: 1024,
              settings: {
                slidesToShow: 1,
                slidesToScroll: 1,
                infinite: true,
                dots: false
              }
            },
            {
              breakpoint: 600,
              settings: {
                slidesToShow: 1,
                slidesToScroll: 1
              }
            },
            {
              breakpoint: 480,
              settings: {
                slidesToShow: 1,
                slidesToScroll: 1
              }
            }
          ]
      });

      ////////////////////////////////////////////////
      /* if($("#myModal2").is(":visible")) {
        $('.slideshow-slider').slick('slickPause');
        slideStatus = "active"
        showMenuButtons()
      } else {
        $('.slideshow-slider').slick('slickPlay');
        slideStatus = "cycling"
        hideMenuButtons()
      } */
      ////////////////////////////////////////////////
      $('.slideshow-slider').slick('slickPause')
      ////////////////////////////////////////////////

      // Call function
      //checkSlickStatus()

    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function initiateRelatedGamesSlider() {
      if ($('.related_games').find('div').length) {
        $('.related_games').slick({
          infinite: true,
          slidesToShow: 5,
          slidesToScroll: 2,
          autoplay: true,
          prevArrow:'<img class="a-left control-c prev slick-prev" src="images/earshot-games_btn_left.png" style="width:30px !important; height:auto; left:-30px; z-index:1;">',
          nextArrow:'<img class="a-right control-c next slick-next" src="images/earshot-games_btn_right.png" style="width:30px !important; height:auto; right:-30px; z-index:1;">',
          responsive: [
          {
            breakpoint: 1024,
            settings: {
              slidesToShow: 3,
              slidesToScroll: 1,
              infinite: true,
              dots: false
            }
          },
          {
            breakpoint: 600,
            settings: {
              slidesToShow: 2,
              slidesToScroll: 1
            }
          },
          {
            breakpoint: 480,
            settings: {
              slidesToShow: 1,
              slidesToScroll: 1
            }
          }
        ]
        });
      }
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    jQuery(document).ready(function ($) {
      /*$(document).on('click', ".games-slider-item", function () {
        var objectId = $(this).data("objectid");
        scrollPage("#list-game-" + objectId);
      });*/
      //////////////////////////////////////////////////////////////////////////////////////////////////
      $(document).click(function(event) {
        //if you click on anything except the modal itself or the "open modal" link, close the modal
        let toggleTimer = setTimeout(function() {
          clearTimeout(toggleTimer)
          if (!$("#myModal2").is(":visible") ) {
            //console.log("modal closed")

            // Make the button active
            if(MODE_TYPE == "list") {
              document.getElementById("btnFindList").classList.remove("btn-outline-primary-active");
              document.getElementById("btnFindList").classList.add("btn-outline-primary");
            } else {
              document.getElementById("btnFindSlide").classList.remove("btn-outline-primary-active");
              document.getElementById("btnFindSlide").classList.add("btn-outline-primary");

              //if(document.getElementById("btnFindSlide").style.opacity == 0) {
                // Restart slick
                // slideStatus = "cycling"
              //console.log(clickedSlideID, " ID")
              if(clickedSlideID == -1) {
                  /* slideStatus = "cycling"
                  $('.slideshow-slider').slick('slickPlay'); */
                  //console.log("ND-1")
              }

            } 
            
            $.each(boardgames, function (index, data) {
              var data_objectid = data['@attributes']['objectid'];
              if (clickedSlideID == data_objectid) {
                //renderDetailsViewHTML(data);
                //clickedSlideID = -1
                return;
              }
            });
          } /* else {
            if(MODE_TYPE == "slideshow") {
              slideStatus = "active"
              $('.slideshow-slider').slick('slickPause');
            } 
          }*/
        }, 500)
      });
      //////////////////////////////////////////////////////////////////////////////////////////////////
      $(document).on('click', ".page-number", function () {
       if(deviceType == "Mobile") {return}
        if($(this).hasClass('active') === false){
          // console.log("no Active Class!")
          paged = $(this).data('paged');
          resetListPageContent(paged);
        }
      });
      //////////////////////////////////////////////////////////////////////////////////////////////////
      $(document).on('click', ".page-pre", function () {
        if($(this).hasClass("disabled-link")){
          return;
        }
        paged = parseInt(paged) - 1;
        resetListPageContent(paged);
      });
      //////////////////////////////////////////////////////////////////////////////////////////////////
      $(document).on('click', ".page-next", function () {
        if($(this).hasClass("disabled-link")){
          return;
        }
        paged = parseInt(paged) + 1;
        resetListPageContent(paged);
      });
      //////////////////////////////////////////////////////////////////////////////////////////////////
      $(document).on('click', ".back-btn", function () {
        //console.log("sourceType ", sourceType)
        if(sourceType != ''){
            if(sourceType == 'slideshow'){
              displaySliderShowSection();
              hideListViewSection();
              hideDetailsViewSection();
              MODE_TYPE = "slideshow"

              //////////////////////////////////////////////////////////
              /* slideStatus = "cycling"
              $('.slideshow-slider').slick('slickPlay'); */
             //////////////////////////////////////////////////////////

            } else {
                if (paged) {
                  resetListPageContent(paged);
                }
                displayListViewSection();
                hideDetailsViewSection();
            }
        } else {
           if (paged) {
              resetListPageContent(paged);
            }
            displayListViewSection();
            hideDetailsViewSection();
            MODE_TYPE = "list"
        }
      });
      //////////////////////////////////////////////////////////////////////////////////////////////////
      $(document).on('click', ".view-details", function () {
        
        var objectid = $(this).data('objectid');
        sourceType = $(this).attr("data-sourceType");
        //console.log("Clicked on view details - ", MODE_TYPE)

        if(MODE_TYPE == "slideshow") {
          /* slideStatus = "stop" */
          //console.log($('.slideshow-slider').slick('slickPause').status, " >>>> ")
          //console.log(clickedSlideID, " >>>>")
          /* if(document.getElementById("btnFindSlide").style.opacity == 0) { */
            /////////////////////////////////////////////////////////////////////////////////////////////
          //if(clickedSlideID != objectid) {
            /* clickedSlideID = -1 */
            clickedSlideID = objectid
            /* showMenuButtons() */
            //viewSearchPanel()
          //} else {
            //console.log("VD-1")
            //clickedSlideID = $(this).data('objectid');

            /* $('.slideshow-slider').slick('slickPause'); */
            
            $.each(boardgames, function (index, data) {
              var data_objectid = data['@attributes']['objectid'];
              if (objectid == data_objectid) {
                MODE_TYPE = "list"
                renderDetailsViewHTML(data);
                return;
              }
            });
          //}
        } else {
          $.each(boardgames, function (index, data) {
            var data_objectid = data['@attributes']['objectid'];
            if (objectid == data_objectid) {
              renderDetailsViewHTML(data);
              return;
            }
          });
        }
        ////////////////////////////////////////////////////////////////////////////////////////////////////
      });

    });
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function scrollPage(element) {
      $('html, body').animate({
        scrollTop: $(element).offset().top
      });
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function renderDetailsViewHTML(data) {
      hideListViewSection();
      hideSliderShowSection();
      displayDetailsViewSection();
      var objectid = data['@attributes']['objectid'];
      var boardGameName = getBoardGameName(data);
      var boardGameDesigner = getBoardGameDesigner(data);
      var gameRatingAverage = getBoardGameRatingAverage(data);
      //var ratingInPercentage = ((gameRatingAverage*100)/5);

      ////////////////////////////////////////////////////////////////////////////////////

      //var ratingInPercentage = ((gameRatingAverage - 6)*5/2) * 20;
      // Prev Logic
      /* var ratingInPercentage = ((gameRatingAverage - 5)*5/2) * 14; */
      // New Logic
      var ratingInPercentage = ((gameRatingAverage - 5)*5/3) * 20;

      if(ratingInPercentage < 0) {
        ratingInPercentage = 0
      } else if(ratingInPercentage > 100) {
        ratingInPercentage = 100
      }

      ////////////////////////////////////////////////////////////////////////////////////



      var playerStats = (data.minplayers == data.maxplayers) ? data.maxplayers : data.minplayers+"-"   +data.maxplayers;
      var playtimeStats = (data.minplaytime == data.maxplaytime) ? data.maxplaytime : data.minplaytime+"-"+data.maxplaytime;

      $('.game-details').html(`       
            <div class="bg-light border-0 card game-card">
              <div class="card-body">
                <div class="row">
                  <div class="col-lg-9 col-md-8">
                    <h3 class="font-DINCondensed game-title text-primary">${boardGameName} <sup class="sup-small" data-objectid="${data.objectid}">${data.yearpublished}</sup></h3>
                    <h5 class="font-DINCondensed game-designer">${boardGameDesigner}</h5>

                    <div class="row mt-3">
                      <div class="col-md-4">
                        <div class="img-box"><img src="${data.image}" class="img-fluid"></div>
                        <div class="gamePrivateDataHTML details-game-${objectid}-private-data"></div>
                      </div>
                      <div class="col-md-8">
                        <div class="font-DINCondensed text-large">${data.description}</div>                        
                      </div>                    
                    </div>
                  </div>
                  <div class="col-lg-3 col-md-4 text-md-right">
                    <div class="metaGroup_details"><span><img src="./images/earshot-games_player.png" width="35px">${playerStats}</span><span><img src="./images/earshot-games_time.png"  width="35px">${playtimeStats}</span><span><img src="./images/earshot-games_age.png"  width="35px">${data.age}+</span>
                      ${data.boardgamemechanic != undefined && data.boardgamemechanic.includes("Cooperative Game") == true
                      ?
                      `<span><img src="./images/earshot-games_coop.png?version=1.1.0" width="35px"></span>`
                      : ``}
                    </div>
                    <!--div class="ratingWrapper"-->
                    <div id="${objectid}_d" class="ratingWrapper" onClick='toggleRating(event, ${ratingInPercentage}, ${gameRatingAverage})'>
                      <div id="star_d" class="ratingStar" style="width: ${ratingInPercentage}%"> 
                        <span>&#x2605;&#x2605;&#x2605;&#x2605;&#x2605;</span>
                      </div> 
                    </div>
                    <!--<div data-level="50" class="game-level text-large bg-primary text-center text-uppercase my-2">
                      <span>Medium</span>
                    </div>-->
                    <div class="card text-left my-4">
                      <div class="card-header bg-alto py-1 px-2">MECHANICS</div>
                      <div class="card-body p-2"><div class="boardgamemechanic"> </div></div>
                    </div>
                    <div class="barcode">	
                      <div class="qrcode" id ="${objectid}_barcode"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <h5 class="related_title">You might also like</h5>  
            <div class="related_games"></div>
           `);

      renderGamePrivateData(data, `.details-game-${objectid}-private-data`);
      boardgameMechanicData(data);
      renderRealetedBoardGameSlider();
      renderQRCode(`${objectid}_barcode`, objectid);
      scrollPage(".detail-view-section");
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function boardgameMechanicData(data) {
      var boardgameMechanic = '';
      if ($.isArray(data.boardgamemechanic)) {
        $.each(data.boardgamemechanic, function (gameMechanic, index) {
          boardgameMechanic += '<div>' + index + '</div>';
        });
      } else if(data.boardgamemechanic){
        boardgameMechanic = data.boardgamemechanic;
      }
      boardgameMechanic = (boardgameMechanic == '') ? 'No Mechanics' : boardgameMechanic;
      $('.boardgamemechanic').append(boardgameMechanic);
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function hideListViewSection() {
      $('.list-view-section').addClass('d-none');
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function displayListViewSection() {
      $('.list-view-section').removeClass('d-none');
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function hideDetailsViewSection() {
      $('.detail-view-section').addClass('d-none');
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function displayDetailsViewSection() {
      $('.detail-view-section').removeClass('d-none');
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function hideSliderShowSection() {
      $('.list-slideshow-section').addClass('d-none');
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function displaySliderShowSection() {
      $('.list-slideshow-section').removeClass('d-none');
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function renderGamePrivateData(data, elementClass) {
      var objectid = data['@attributes']['objectid'];
      var gamePrivatedataHTML = '';
      $(document).find(elementClass).html(gamePrivatedataHTML).addClass('d-none');
      $.each(privateDataList, function (index, row) {
        if (row["Game ID"] == objectid) {
          $.each(row, function (key, value) {
            if (key != "Game ID" && key != "Game Name" && key != "Showcase" && key != "") {
              if(value != "") {
                //if(key == "Price") {
                  //gamePrivatedataHTML += "<div class=''><strong>" + key + ": </strong> <span style='color:gold' class=''>$" + value + " USD</span></div>";
                //} else {
                  //gamePrivatedataHTML += "<div class=''><strong>" + key + ": </strong> <span style='color:cyan' class=''>" + value + "</span></div>";
                  gamePrivatedataHTML += "<div class=''><strong>" + key + ": </strong> <span class=''>" + value + "</span></div>";
                //}
              }
            }
          });
          return;
        }
      });
      // console.log("gamePrivatedataHTML ", gamePrivatedataHTML);
      if(gamePrivatedataHTML != ''){
        $(document).find(elementClass).html(gamePrivatedataHTML).removeClass('d-none');
      }
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function shuffleArray(array) {
      let currentIndex = array.length,  randomIndex;
      // While there remain elements to shuffle.
      while (currentIndex != 0) {
        // Pick a remaining element.
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex--;
        // And swap it with the current element.
        [array[currentIndex], array[randomIndex]] = [
          array[randomIndex], array[currentIndex]];
      }
      return array;
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function resetListPageContent(page) {
      //console.log("Global Paged ", page);  
      //console.log(boardgames.length, " --- ", page)

      let nextIndex = (page * 10);
      //console.log(page, " --- ", nextIndex)
      $(".cardList").html('');
      $(".cardList").scrollTop(0)

      $('.image_slider').slick('unslick'); /* ONLY remove the classes and handlers added on initialize */
      $('.image_slider').html('');
      for (var loop = 0; loop < 10; loop++) {
        if (boardgames[nextIndex]) {
          renderListViewItem(boardgames[nextIndex]);
          nextIndex += 1;
        }
      }
      initiateSlickSlider();
      renderPaginationHTML();
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////
    function renderQRCode(element, gameID){
      const qrcode = new QRCode(element, {
        //text: 'https://boardgamegeek.com/',
        text: 'https://boardgamegeek.com/boardgame/' + gameID,
        width: 120,
        height: 120,
        colorDark : '#000',
        colorLight : '#fff',
        correctLevel : QRCode.CorrectLevel.H
      });	
    }

  </script>
</body>
</html>